(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){"use strict";var a;!function(e){e.Sum="+",e.Count="#",e.Min="<",e.Max=">"}(a||(a={}))},113:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return d}));var a=n(16),i=n(8),r=n(49),o=150,c=370,s=function(e,t){return[{group:t,items:[{name:e.rowOperations.insertAbove,type:r.b.RowInsertAbove},{name:e.rowOperations.insertBelow,type:r.b.RowInsertBelow},{name:e.rowOperations.delete,type:r.b.RowDelete},{name:e.rowOperations.clear,type:r.b.RowClear}]}]},l=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r="".concat(n,"-").concat(0===a?1:a),o=i.find(t,{name:r});return o?e(t,n,a+1):r},u=function(e){return e.original.entryInfo.name},d=function(e){return Object(a.a)(Object(a.a)({},e),{},{entryExpression:{uid:e.entryExpression.uid}})}},115:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},116:function(e,t){},117:function(e,t){},118:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Feel="FEEL",e.Java="JAVA",e.Pmml="PMML"}(a||(a={}))},119:function(e,t,n){"use strict";var a;!function(e){e.Unique="UNIQUE",e.First="FIRST",e.Priority="PRIORITY",e.Any="ANY",e.Collect="COLLECT",e.RuleOrder="RULE ORDER",e.OutputOrder="OUTPUT ORDER"}(a||(a={}))},120:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},121:function(e,t){},122:function(e,t,n){},146:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u}));var a=n(0),i=n(16),r=n(149),o=Object(i.a)(Object(i.a)({},r.en),{},{addParameter:"Add parameter",choose:"Choose...",class:"class",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionTable:"Decision Table",delete:"Delete",editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editParameter:"Edit Parameter",editParameters:"Edit parameters",editRelation:"Edit Relation",enterFunction:"Enter function",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",methodSignature:"method signature",name:"Name",parameters:"PARAMETERS",relation:"Relation",rowOperations:{clear:"Clear",delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectFunctionKind:"Select Function Kind",selectLogicType:"Select logic type"}),c={locale:"en",dictionary:o},s=new Map([["en",o]]),l=a.createContext({});function u(){return Object(a.useContext)(l)}},147:function(e,t,n){"use strict";var a=n(80),i=n(0),r=n(32);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));n(2);window.renderBoxedExpressionEditor=function(e,t){r.render(i.createElement(a.a,{expressionDefinition:{selectedExpression:t}}),document.getElementById(e))}},172:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return c}));var a=n(3),i=n(0),r=n(32),o=(n(178),n(147)),c=function(){var e={uid:"id1",logicType:"Context",name:"Expression Name",dataType:"<Undefined>",contextEntries:[{entryInfo:{name:"ContextEntry-1",dataType:"<Undefined>"},entryExpression:{uid:"id2",logicType:"Context",contextEntries:[{entryInfo:{name:"ContextEntry-1",dataType:"<Undefined>"},entryExpression:{uid:"id4",isHeadless:!0,logicType:"Relation",columns:[{name:"column-1",dataType:"<Undefined>",width:209},{name:"column-2",dataType:"<Undefined>",width:452}],rows:[["",""]]},editInfoPopoverLabel:"Edit Context Entry"}],result:{uid:"id5",logicType:"Function",functionKind:"FEEL",formalParameters:[{name:"p-1",dataType:"<Undefined>"},{name:"p-2",dataType:"<Undefined>"}],parametersWidth:663,expression:{logicType:"Literal expression"}},entryInfoWidth:150,entryExpressionWidth:739},editInfoPopoverLabel:"Edit Context Entry"}],result:{uid:"id3",logicType:"Invocation",bindingEntries:[{entryInfo:{name:"p-1",dataType:"<Undefined>"},entryExpression:{uid:"id7",logicType:"Context",contextEntries:[{entryInfo:{name:"ContextEntry-1",dataType:"<Undefined>"},entryExpression:{},editInfoPopoverLabel:"Edit Context Entry"}],result:{uid:"id9"},entryInfoWidth:257,entryExpressionWidth:404},editInfoPopoverLabel:"Edit Parameter"}],invokedFunction:"",entryInfoWidth:150,entryExpressionWidth:739},entryInfoWidth:150,entryExpressionWidth:967},t=Object(i.useState)(e),n=Object(a.a)(t,2),r=n[0],c=n[1],s={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return c(e)},broadcastLiteralExpressionDefinition:function(e){return c(e)},broadcastRelationExpressionDefinition:function(e){return c(e)},broadcastContextExpressionDefinition:function(e){return c(e)},broadcastListExpressionDefinition:function(e){return c(e)},broadcastInvocationExpressionDefinition:function(e){return c(e)},broadcastFunctionExpressionDefinition:function(e){return c(e)}},i.createElement("div",{className:"showcase"},i.createElement("div",{className:"boxed-expression"},i.createElement(o.BoxedExpressionEditor,{expressionDefinition:s})),i.createElement("div",{className:"updated-json"},i.createElement("p",{className:"disclaimer"},"\u26a0 Currently, JSON gets updated only for literal expression, relation, context, list, invocation and function logic types"),i.createElement("pre",null,JSON.stringify(r,null,2))))};r.render(i.createElement(c,null),document.getElementById("root"))},178:function(e,t,n){},179:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},2:function(e,t,n){"use strict";n(111),n(112);var a=n(113);n.d(t,"DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH",(function(){return a.a})),n.d(t,"DEFAULT_ENTRY_INFO_MIN_WIDTH",(function(){return a.b})),n.d(t,"generateNextAvailableEntryName",(function(){return a.c})),n.d(t,"getEntryKey",(function(){return a.d})),n.d(t,"getHandlerConfiguration",(function(){return a.e})),n.d(t,"resetEntry",(function(){return a.f}));var i=n(115);n.d(t,"DataType",(function(){return i.a}));var r=n(116);n.o(r,"FunctionKind")&&n.d(t,"FunctionKind",(function(){return r.FunctionKind})),n.o(r,"LogicType")&&n.d(t,"LogicType",(function(){return r.LogicType})),n.o(r,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return r.TableHeaderVisibility})),n.o(r,"TableOperation")&&n.d(t,"TableOperation",(function(){return r.TableOperation}));var o=n(117);n.o(o,"FunctionKind")&&n.d(t,"FunctionKind",(function(){return o.FunctionKind})),n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return o.TableHeaderVisibility})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation}));var c=n(118);n.d(t,"FunctionKind",(function(){return c.a}));n(119);var s=n(120);n.d(t,"LogicType",(function(){return s.a}));var l=n(49);n.d(t,"TableHeaderVisibility",(function(){return l.a})),n.d(t,"TableOperation",(function(){return l.b}))},21:function(e,t,n){"use strict";var a=n(121);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var i=n(146);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return i.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return i.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return i.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return i.d}))},212:function(e,t,n){},214:function(e,t,n){},286:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},49:function(e,t,n){"use strict";var a,i;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),function(e){e[e.Full=0]="Full",e[e.LastLevel=1]="LastLevel",e[e.SecondToLastLevel=2]="SecondToLastLevel",e[e.None=3]="None"}(a||(a={})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete",e[e.RowClear=6]="RowClear"}(i||(i={}))},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return xe}));n(179);var a=n(3),i=n(0),r=(n(180),n(181),n(182),n(148)),o=n(16),c=(n(183),n(2)),s=(n(184),n(185),n(303)),l=n(50),u=n(312),d=n(7),p=n(21),b=n(8),f=function(e){var t=e.selectedDataType,n=e.onDataTypeChange,r=e.menuAppendTo,o=Object(p.useBoxedExpressionEditorI18n)().i18n,s=Object(i.useState)(!1),f=Object(a.a)(s,2),m=f[0],E=f[1],y=Object(i.useCallback)((function(e,t){E(!1),n(t)}),[n]),v=Object(i.useCallback)((function(){return b.map(Object.values(c.DataType),(function(e){return i.createElement(l.a,{key:e,value:e,"data-ouia-component-id":e},e)}))}),[]),O=Object(i.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return v()}return""!==e.target.value?v().filter((function(e){return t.test(e.props.value)})):v()}),[v]),x=Object(i.useCallback)((function(e){return E(e)}),[]);return i.createElement(u.a,{menuAppendTo:r,ouiaId:"edit-expression-data-type",variant:d.e.typeahead,typeAheadAriaLabel:o.choose,onToggle:x,onSelect:y,onFilter:O,isOpen:m,selections:t,hasInlineFilter:!0,inlineFilterPlaceholderText:o.choose},v())},m=(n(198),n(313)),E=(n(199),function(e){var t=e.children,n=e.arrowPlacement,a=e.body,r=e.title,o=e.appendTo,c=e.className,s=e.hasAutoWidth,l=e.minWidth;return i.createElement(m.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector".concat(c?" "+c:""),hasAutoWidth:s,minWidth:l,position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:o,headerContent:i.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},r),bodyContent:a},t)}),y=i.createContext({}),v="Expression Name",O=function(e){var t,n,r,o,s,l,u=e.children,d=e.appendTo,b=e.arrowPlacement,m=e.title,O=e.nameField,x=e.dataTypeField,h=e.selectedDataType,j=void 0===h?c.DataType.Undefined:h,T=e.selectedExpressionName,C=e.onExpressionUpdate,g=Object(i.useContext)(y),w=Object(p.useBoxedExpressionEditorI18n)().i18n;m=null!==(t=m)&&void 0!==t?t:w.editExpression,O=null!==(n=O)&&void 0!==n?n:w.name,x=null!==(r=x)&&void 0!==r?r:w.dataType,d=null!==(o=null!==(s=d)&&void 0!==s?s:null===(l=g.boxedExpressionEditorRef)||void 0===l?void 0:l.current)&&void 0!==o?o:void 0;var R=Object(i.useState)(j),I=Object(a.a)(R,2),k=I[0],L=I[1],N=Object(i.useState)(T),D=Object(a.a)(N,2),S=D[0],H=D[1];Object(i.useEffect)((function(){H(T)}),[T]),Object(i.useEffect)((function(){L(j)}),[j]);var U=Object(i.useCallback)((function(e){H(e.target.value),"blur"===e.type&&C({name:e.target.value,dataType:k})}),[k,C]),F=Object(i.useCallback)((function(e){L(e),C({name:S,dataType:e})}),[S,C]);return i.createElement(E,{title:m,arrowPlacement:b,appendTo:d,body:i.createElement("div",{className:"edit-expression-menu"},i.createElement("div",{className:"expression-name"},i.createElement("label",null,O),i.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:S,onChange:U,onBlur:U,className:"form-control pf-c-form-control",placeholder:v})),i.createElement("div",{className:"expression-data-type"},i.createElement("label",null,x),i.createElement(f,{selectedDataType:k,onDataTypeChange:F})))},u)},x=(n(122),n(163)),h=n(164),j=n(11),T=n(12),C=150,g=function(e){return Math.max(Math.round(parseFloat(e+"")),C)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(e)},R=function(){function e(t,n,a){Object(j.a)(this,e),this.element=t,this.children=n,this.depth=a,this.id=void 0,this.lastColumn=void 0,this.rect=void 0,this.parentRow=void 0}return Object(T.a)(e,[{key:"getId",value:function(){return this.id||(this.id=b.first([].slice.call(this.element.classList).filter((function(e){return e.match(/uuid-/g)})))||""),this.id}},{key:"getRect",value:function(){return this.rect||(this.rect=this.element.getBoundingClientRect()),this.rect}},{key:"isLastColumn",value:function(){var e;this.lastColumn||(this.lastColumn=(null===(e=this.getParentRow())||void 0===e?void 0:e.lastChild)===this.element.closest("th, td"));return this.lastColumn}},{key:"setWidth",value:function(e){var t=g(e);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;document.dispatchEvent(new CustomEvent(e,{detail:{width:t}}))}(this.getId(),t),this.element.style.width=t+"px"}},{key:"refreshWidthAsParent",value:function(){this.children.length>0&&this.setWidth(this.fetchChildWidth()+14)}},{key:"refreshWidthAsLastColumn",value:function(){var e;if(this.isLastColumn()){var t=null===(e=this.getParentRow())||void 0===e?void 0:e.getBoundingClientRect();t&&this.setWidth(Math.round(t.right)-Math.round(this.getRect().x)-1)}}},{key:"getParentRow",value:function(){return this.parentRow||(this.parentRow=this.element.closest("tr")),this.parentRow}},{key:"fetchChildWidth",value:function(){var e=this.element.querySelector("thead, tbody");return g(null===e||void 0===e?void 0:e.getBoundingClientRect().width)}}]),e}(),I=function(){function e(){Object(j.a)(this,e),this.cells=void 0}return Object(T.a)(e,[{key:"getCells",value:function(){return void 0===this.cells&&(this.cells=this.buildCells()),this.cells}},{key:"buildCells",value:function(){var e=this,t=[];return this.fetchCellElements(document.body).forEach((function(n){e.buildCell(n,t,0)})),t}},{key:"buildCell",value:function(e,t,n){var a=this,i=t.find((function(t){return t.element===e}));if(i)return i;var r=new R(e,this.fetchCellElements(e).map((function(e){return a.buildCell(e,t,n+1)})).filter((function(e){return e.depth==n+1})),n);return t.push(r),r}},{key:"fetchCellElements",value:function(e){var t=e.querySelectorAll(".react-resizable");return[].slice.call(t)}}]),e}(),k=function(){(new L).execute()},L=function(){function e(){Object(j.a)(this,e),this.domSession=void 0,this.domSession=new I}return Object(T.a)(e,[{key:"execute",value:function(){var e=this.domSession.getCells();e.sort((function(e,t){return t.depth-e.depth})).forEach(this.refreshWidthAsParent),e.sort((function(e,t){return e.depth-t.depth})).forEach(this.refreshWidthAsLastColumn)}},{key:"refreshWidthAsParent",value:function(e){e.refreshWidthAsParent()}},{key:"refreshWidthAsLastColumn",value:function(e){e.refreshWidthAsLastColumn()}}]),e}(),N=function(e){var t=e.children,n=e.height,r=void 0===n?"100%":n,o=e.minWidth,c=e.onHorizontalResizeStop,s=e.width,l=Object(i.useState)(s),u=Object(a.a)(l,2),d=u[0],p=u[1],f=Object(i.useState)(0),m=Object(a.a)(f,2),E=m[0],v=m[1],O=Object(i.useState)([]),j=Object(a.a)(O,2),T=j[0],w=j[1],R=Object(i.useContext)(y).setSupervisorHash,k=Object(i.useMemo)((function(){return"uuid-".concat(Object(h.v4)())}),[]),L=Object(i.useMemo)((function(){return null!==o&&void 0!==o?o:C}),[o]),N=Object(i.useMemo)((function(){return"".concat("100%"===r?"height-based-on-content":""," ").concat(k)}),[r,k]);Object(i.useLayoutEffect)((function(){function e(e){var t=Math.round(e.detail.width);p(t),null===c||void 0===c||c(t)}return document.addEventListener(k,e),function(){document.removeEventListener(k,e)}}),[k,c,d]);var D=Object(i.useCallback)(g,[]),S=Object(i.useCallback)((function(e,t){var n=[],a=t.element.closest("table"),i=t.getRect(),r=function(e){return null===a||void 0===a?void 0:a.contains(e.element)};if(t.isLastColumn())e.filter((function(e){return e.isLastColumn()})).forEach((function(e){n.push(e)}));else{var o=!1;e.forEach((function(e){(r(e)||function(e){var n;return null===(n=e.element)||void 0===n?void 0:n.contains(t.element)}(e))&&function(e){var t=e.getRect();return t.x<=i.x&&t.right>=i.right}(e)&&(n.push(e),e.isLastColumn()&&(o=!0))})),o&&e.filter((function(e){return e.isLastColumn()&&!r(e)})).forEach((function(e){n.push(e)}))}return n.forEach((function(e){e.element.dataset.initialWidth=e.element.style.width})),b.uniqBy(n,(function(e){return e.getId()}))}),[]),H=Object(i.useCallback)((function(){var e=(new I).getCells(),t=e.find((function(e){return e.getId()===k})),n=S(e,t),a=D(t.getRect().width);w(n),v(a)}),[S,k,D]),U=Object(i.useCallback)((function(e,t){var n=parseInt(t.size.width+"");T.forEach((function(e){var t=n-E,a=e.element;if(!(e.getId()===k)){var i=parseInt(a.dataset.initialWidth+"");a.style.width=i+t+"px"}}))}),[T,k,E]),F=Object(i.useCallback)((function(e,t){var n=D(t.size.width);T.forEach((function(e){var t=n-E,a=D(e.element.dataset.initialWidth);e.setWidth(a+t)})),R("-")}),[T,E,R,D]);return Object(i.useMemo)((function(){return i.createElement(x.ResizableBox,{className:N,width:d,minConstraints:[L,0],height:0,axis:"x",onResize:U,onResizeStop:F,onResizeStart:H,handle:i.createElement("div",{className:"pf-c-drawer"},i.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},i.createElement("div",{className:"pf-c-drawer__splitter-handle"})))},t)}),[N,U,F,H,t])},D=function(e){var t=e.children,n=Object(i.useContext)(y).supervisorHash;return Object(i.useEffect)((function(){var e=setTimeout(k,0);return function(){return clearTimeout(e)}}),[n]),i.createElement("div",null,t)},S=function(e){var t=e.uid,n=e.content,r=void 0===n?"":n,l=e.dataType,u=void 0===l?c.DataType.Undefined:l,d=e.name,p=void 0===d?v:d,b=e.onUpdatingNameAndDataType,f=e.isHeadless,m=void 0!==f&&f,E=e.onUpdatingRecursiveExpression,y=e.width,x=Object(i.useState)(p),h=Object(a.a)(x,2),j=h[0],T=h[1],C=Object(i.useState)(u),g=Object(a.a)(C,2),w=g[0],R=g[1],I=Object(i.useRef)(r),k=Object(i.useRef)(y||250),L=Object(i.useCallback)((function(){var e,n,a=Object(o.a)({uid:t,name:j,dataType:w,logicType:c.LogicType.LiteralExpression,content:I.current},m||250===k.current?{}:{width:k.current});m?null===E||void 0===E||E(a):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastLiteralExpressionDefinition)||void 0===n||n.call(e,a)}),[w,j,m,E,t]),D=Object(i.useCallback)((function(e){var t=e.dataType,n=void 0===t?c.DataType.Undefined:t,a=e.name,i=void 0===a?v:a;T(i),R(n),null===b||void 0===b||b(i,n),L()}),[b,L]),S=Object(i.useCallback)((function(e){I.current=e.target.value,L()}),[L]),H=Object(i.useCallback)((function(e){k.current=e,L()}),[L]),U=Object(i.useCallback)((function(e){return i.createElement(N,{width:k.current,minWidth:250,onHorizontalResizeStop:H},e)}),[H]),F=Object(i.useMemo)((function(){return i.createElement("div",{className:"literal-expression-header"},U(i.createElement(O,{selectedExpressionName:j,selectedDataType:w,onExpressionUpdate:D},i.createElement("div",{className:"expression-info"},i.createElement("p",{className:"expression-name pf-u-text-truncate"},j),i.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",w,")")))))}),[w,j,D,U]),A=Object(i.useMemo)((function(){return i.createElement(s.a,{defaultValue:I.current,onBlur:S,"aria-label":"literal-expression-content"})}),[S]);return Object(i.useEffect)((function(){L()}),[L]),i.createElement("div",{className:"literal-expression"},m?null:F,i.createElement("div",{className:"literal-expression-body"},A))},H=(n(212),n(213),n(10)),U=(n(214),n(95)),F=n(317),A=n(311),P=n(304),W=n(305),_=function(e){var t=e.tableInstance,n=e.children,a=e.headerVisibility,r=void 0===a?c.TableHeaderVisibility.Full:a,s=e.getRowKey,l=e.getColumnKey,u=e.onColumnsUpdate,d=Object(i.useCallback)((function(e,n,a){var r=0===e?"counter-cell":"data-cell",o=t.allColumns[e],c=0===e?i.createElement(i.Fragment,null,a+1):i.createElement(N,{width:"number"===typeof(null===o||void 0===o?void 0:o.width)?null===o||void 0===o?void 0:o.width:C,onHorizontalResizeStop:function(n){o.setWidth&&(!function(n){var a;null===o||void 0===o||null===(a=o.setWidth)||void 0===a||a.call(o,n),t.allColumns[e].width=n}(n),null===u||void 0===u||u(t.columns))}},i.createElement(i.Fragment,null,n.render("Cell")));return i.createElement(A.a,Object.assign({},t.getTdProps(e,a),{key:"".concat(l(n.column),"-").concat(e),"data-ouia-component-id":"expression-column-"+e,className:"".concat(r)}),c)}),[l,u,t]),p=Object(i.useCallback)((function(e,t){var n=Object(o.a)(Object(o.a)({},e.getRowProps()),{},{style:{}});return i.createElement(P.a,Object.assign({className:"table-row"},n,{key:"".concat(s(e),"-").concat(t),ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return d(n,e,t)})))}),[s,d]),b=Object(i.useMemo)((function(){return i.createElement(P.a,{className:"table-row additive-row"},i.createElement(A.a,{role:"cell",className:"empty-cell"},i.createElement("br",null)),null===n||void 0===n?void 0:n.map((function(e,t){return i.createElement(A.a,{role:"cell",key:t,className:"row-remainder-content"},e)})))}),[n]);return i.createElement(W.a,Object.assign({className:"".concat(r===c.TableHeaderVisibility.None?"missing-header":"")},t.getTableBodyProps()),t.rows.map((function(e,n){return t.prepareRow(e),p(e,n)})),n?b:null)},M=(n(286),n(306)),B=n(307),K=n(308),V=n(315),z=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,a=e.onOperation;return i.createElement(M.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return a(t)}},t.map((function(e){return i.createElement(B.a,{key:e.group,label:e.group,className:b.every(e.items,(function(e){return!b.includes(n,e.type)}))?"no-allowed-actions-in-group":""},i.createElement(K.a,null,e.items.map((function(e){return i.createElement(V.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!b.includes(n,e.type)},e.name)}))))})))},Y=function(e){var t=e.columnPrefix,n=e.tableColumns,r=e.lastSelectedColumnIndex,o=e.lastSelectedRowIndex,s=e.tableRows,l=e.onRowsUpdate,u=e.onRowAdding,d=e.showTableHandler,p=e.setShowTableHandler,f=e.tableHandlerTarget,E=e.handlerConfiguration,v=e.tableHandlerAllowedOperations,O=e.resetRowCustomFunction,x=void 0===O?function(){return{}}:O,h=e.onColumnsUpdate,j=Object(i.useContext)(y),T=Object(i.useState)(r),C=Object(a.a)(T,2),g=C[0],w=C[1],R=Object(i.useState)(o),I=Object(a.a)(R,2),k=I[0],L=I[1];Object(i.useEffect)((function(){w(r)}),[r]),Object(i.useEffect)((function(){L(o)}),[o]);var N=function(e,t,n){return[].concat(Object(H.a)(e.slice(0,t)),[n],Object(H.a)(e.slice(t)))},D=function(e,t,n){return[].concat(Object(H.a)(e.slice(0,t+1)),[n],Object(H.a)(e.slice(t+1)))},S=function(e,t){return[].concat(Object(H.a)(e.slice(0,t)),Object(H.a)(e.slice(t+1)))},U=Object(i.useCallback)((function(e){var a="".concat(t).concat(e);return b.find(n.current,{accessor:a})?U(e+1):a}),[t,n]),F=Object(i.useCallback)((function(e){return{accessor:U(e.length),label:U(e.length),dataType:c.DataType.Undefined}}),[U]),A=Object(i.useCallback)((function(e){h(e),l(s.current)}),[h,l,s]),P=Object(i.useCallback)((function(e){switch(e){case c.TableOperation.ColumnInsertLeft:A(N(n.current,g,F(n.current)));break;case c.TableOperation.ColumnInsertRight:A(D(n.current,g,F(n.current)));break;case c.TableOperation.ColumnDelete:A(S(n.current,g));break;case c.TableOperation.RowInsertAbove:l(N(s.current,k,u()));break;case c.TableOperation.RowInsertBelow:l(D(s.current,k,u()));break;case c.TableOperation.RowDelete:l(S(s.current,k));break;case c.TableOperation.RowClear:l((t=s.current,a=k,[].concat(Object(H.a)(t.slice(0,a)),[x(t[a])],Object(H.a)(t.slice(a+1)))))}var t,a;p(!1)}),[F,A,u,l,g,k,p,n,s]);return Object(i.useMemo)((function(){var e,t;return i.createElement(m.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:d,shouldClose:function(){return p(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return f},appendTo:null!==(e=null===(t=j.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:void 0,bodyContent:i.createElement(z,{handlerConfiguration:E,allowedOperations:v,onOperation:P})})}),[d,j.boxedExpressionEditorRef,E,v,P,p,f])},X=n(170),G=n(314),J=n(309),q=function(e){var t=e.tableInstance,n=e.tableRows,a=e.onRowsUpdate,r=e.editColumnLabel,s=e.headerVisibility,l=void 0===s?c.TableHeaderVisibility.Full:s,u=e.skipLastHeaderGroup,d=e.getColumnKey,p=e.tableColumns,f=e.onColumnsUpdate,m=Object(i.useCallback)((function(e,t){return a(b.map(n.current,(function(n){var a=n[e];return delete n[e],n[t]=a,n})))}),[a,n]),E=Object(i.useCallback)((function(e){return function(t){var n=t.name,a=void 0===n?"":n,i=t.dataType,r=void 0===i?c.DataType.Undefined:i,o=p.current[e].accessor,s=Object(H.a)(p.current);s[e].label=a,s[e].accessor=a,s[e].dataType=r,f(s),a!==o&&m(o,a)}}),[f,p,m]),y=Object(i.useCallback)((function(e,t){return i.createElement(G.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column no-clickable-cell",key:"".concat(d(e),"-").concat(t)}),i.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[d]),v=Object(i.useCallback)((function(e){return i.createElement("div",{className:"header-cell-info","data-ouia-component-type":"expression-column-header-cell-info"},e.headerCellElement?e.headerCellElement:i.createElement("p",{className:"pf-u-text-truncate"},e.label),e.dataType?i.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")"):null)}),[]),x=Object(i.useCallback)((function(e,t){p.current[e].width=t,f(p.current)}),[f,p]),h=Object(i.useCallback)((function(e,n){var a=Object(o.a)(Object(o.a)({},e.getHeaderProps()),{},{style:{}}),c=t.getThProps(e,n),s=e.width||C;return i.createElement(G.a,Object.assign({},a,c,{className:"resizable-column ".concat(e.dataType?null:"no-clickable-cell"),key:"".concat(d(e),"-").concat(n)}),i.createElement(N,{width:s,onHorizontalResizeStop:function(e){return x(n,e)}},i.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.dataType?i.createElement(O,{title:r,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:E(n),key:"".concat(d(e),"-").concat(n)},v(e)):v(e))))}),[r,d,E,x,v,t]),j=Object(i.useCallback)((function(e,t){return e.isCountColumn?y(e,t):h(e,t)}),[y,h]),T=Object(i.useCallback)((function(e){return u?b.dropRight(e.headerGroups):e.headerGroups}),[u]),g=Object(i.useMemo)((function(){return T(t).map((function(e){var t=Object(o.a)(Object(o.a)({},e.getHeaderGroupProps()),{},{style:{}}),n=t.key,a=Object(X.a)(t,["key"]);return i.createElement(P.a,Object.assign({key:n},a),e.headers.map((function(e,t){return j(e,t)})))}))}),[T,j,t]),w=Object(i.useCallback)((function(e){return i.createElement(P.a,null,b.nth(t.headerGroups,e).headers.map((function(e,t){return j(e,t)})))}),[j,t.headerGroups]);switch(l){case c.TableHeaderVisibility.Full:return i.createElement(J.a,{noWrap:!0},g);case c.TableHeaderVisibility.LastLevel:return i.createElement(J.a,{noWrap:!0},w(-1));case c.TableHeaderVisibility.SecondToLastLevel:return i.createElement(J.a,{noWrap:!0},w(-2));default:return null}},Q="no-table-context-menu",Z=function(e){var t=e.tableId,n=e.children,r=e.columnPrefix,o=void 0===r?"column-":r,s=e.editColumnLabel,l=e.onColumnsUpdate,u=e.onRowsUpdate,d=e.onRowAdding,p=void 0===d?function(){return{}}:d,f=e.controllerCell,m=void 0===f?"#":f,E=e.defaultCell,v=e.rows,O=e.columns,x=e.handlerConfiguration,h=e.headerVisibility,j=e.headerLevels,T=void 0===j?0:j,C=e.skipLastHeaderGroup,g=void 0!==C&&C,w=e.getRowKey,R=void 0===w?function(e){return e.id}:w,I=e.getColumnKey,k=void 0===I?function(e){return e.id}:I,L=e.resetRowCustomFunction,N=Object(i.useRef)(null),D=Object(i.useContext)(y),S=Object(i.useState)(m),A=Object(a.a)(S,2),P=A[0],W=A[1],M=Object(i.useCallback)((function(e,t){t>0&&(b.assign(e,{columns:[{label:h===c.TableHeaderVisibility.Full?"0":P,accessor:"0",minWidth:60,width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}),M(e.columns[0],t-1))}),[P,h]),B=Object(i.useCallback)((function(e,t){var n={label:e,accessor:"#",width:60,minWidth:60,isCountColumn:!0};return M(n,T),[n].concat(Object(H.a)(t))}),[M,T]),K=Object(i.useRef)(B(P,O)),V=Object(i.useRef)(v),z=Object(i.useState)(!1),X=Object(a.a)(z,2),G=X[0],J=X[1],Z=Object(i.useState)(document.body),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=Object(i.useState)(b.values(c.TableOperation).map((function(e){return parseInt(e.toString())}))),ae=Object(a.a)(ne,2),ie=ae[0],re=ae[1],oe=Object(i.useState)(-1),ce=Object(a.a)(oe,2),se=ce[0],le=ce[1],ue=Object(i.useState)(-1),de=Object(a.a)(ue,2),pe=de[0],be=de[1];Object(i.useEffect)((function(){K.current=B(m,K.current.slice(1)),W(m)}),[m,B]),Object(i.useEffect)((function(){K.current=B(P,O)}),[O]),Object(i.useEffect)((function(){V.current=v}),[v]);var fe=Object(i.useCallback)((function(e){K.current=e,null===l||void 0===l||l(e.slice(1))}),[l]),me=Object(i.useCallback)((function(e){V.current=e,null===u||void 0===u||u(e)}),[u]),Ee=Object(i.useCallback)((function(e,t,n){var a=Object(H.a)(V.current);a[e][t]=n,me(a)}),[me]),ye=Object(i.useCallback)((function(e,t){var n=Object(H.a)(V.current);n[e]=t,me(n)}),[me]),ve={Cell:Object(i.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:E?E[t.id](e):function(e){var t=e.value,n=e.row.index,r=e.column.id,o=e.onCellUpdate,c=i.useState(t),s=Object(a.a)(c,2),l=s[0],u=s[1];Object(i.useEffect)((function(){u(t)}),[t]);var d=Object(i.useCallback)((function(e){u(e.target.value)}),[]),p=Object(i.useCallback)((function(){o(n,r,l)}),[r,n,l,o]);return i.createElement("textarea",{value:l||"",onChange:d,onBlur:p})}(e)}),[])},Oe=function(e){var t=e.closest("table")===N.current,n=!e.classList.contains(Q);return t&&n},xe=function(e,t){var n,a;te(e),null===(n=D.currentlyOpenedHandlerCallback)||void 0===n||n.call(D,!1),J(!0),null===(a=D.setCurrentlyOpenedHandlerCallback)||void 0===a||a.call(D,(function(){return J})),le(t)},he=Object(U.useTable)({columns:K.current,data:V.current,defaultColumn:ve,onCellUpdate:Ee,onRowUpdate:ye,getThProps:function(e,t){return{onContextMenu:function(n){var a=n.target,i=!e.disableHandlerOnHeader;Oe(a)&&i&&(n.preventDefault(),re([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(H.a)(K.current.length>2&&t>0?[c.TableOperation.ColumnDelete]:[]))),xe(a,t))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;Oe(a)&&(n.preventDefault(),re([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(H.a)(K.current.length>2&&e>0?[c.TableOperation.ColumnDelete]:[]),[c.TableOperation.RowInsertAbove,c.TableOperation.RowInsertBelow],Object(H.a)(V.current.length>1?[c.TableOperation.RowDelete]:[]),[c.TableOperation.RowClear])),xe(a,e),be(t))}}}},U.useBlockLayout,U.useResizeColumns);return i.createElement("div",{className:"table-component ".concat(t)},i.createElement(F.a,Object.assign({variant:"compact"},he.getTableProps(),{ref:N}),i.createElement(q,{tableInstance:he,editColumnLabel:s,headerVisibility:h,skipLastHeaderGroup:g,tableRows:V,onRowsUpdate:me,tableColumns:K,getColumnKey:k,onColumnsUpdate:fe}),i.createElement(_,{tableInstance:he,getRowKey:R,getColumnKey:k,onColumnsUpdate:fe,headerVisibility:h},n)),G&&x?i.createElement(Y,{tableColumns:K,columnPrefix:o,handlerConfiguration:x,lastSelectedColumnIndex:se,lastSelectedRowIndex:pe,tableRows:V,onRowsUpdate:me,onRowAdding:p,showTableHandler:G,setShowTableHandler:J,tableHandlerAllowedOperations:ie,tableHandlerTarget:ee,resetRowCustomFunction:L,onColumnsUpdate:fe}):null)},$=function(e){var t=Object(p.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:c.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:c.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:c.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:c.TableOperation.RowDelete}]}],a=Object(i.useRef)(void 0===e.columns?[{name:"column-1",dataType:c.DataType.Undefined}]:e.columns),r=Object(i.useRef)(void 0===e.rows?[[""]]:e.rows),s=Object(i.useCallback)((function(){var t,n,i,c=Object(o.a)(Object(o.a)({},e),{},{columns:a.current,rows:r.current});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,c):null===(n=window.beeApi)||void 0===n||null===(i=n.broadcastRelationExpressionDefinition)||void 0===i||i.call(n,c)}),[e]),l=Object(i.useCallback)((function(){return b.map(a.current,(function(e){return Object(o.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[]),u=Object(i.useCallback)((function(){return b.map(r.current,(function(e){return b.reduce(a.current,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[]),d=Object(i.useCallback)((function(e){r.current=b.map(e,(function(e){return b.reduce(a.current,(function(t,n){return t.push(e[n.name]||""),t}),[])})),s()}),[s]),f=Object(i.useCallback)((function(e){a.current=b.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})),s()}),[s]);return Object(i.useEffect)((function(){s()}),[s]),i.createElement("div",{className:"relation-expression"},i.createElement(Z,{columnPrefix:"column-",editColumnLabel:t.editRelation,columns:l(),rows:u(),onColumnsUpdate:f,onRowsUpdate:d,handlerConfiguration:n}))},ee=(n(289),n(290),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,a=e.onExpressionResetting,r=Object(i.useRef)(null),o=Object(i.useRef)(t);Object(i.useEffect)((function(){o.current=b.omit(t,"isHeadless")}),[t.logicType]);var s=Object(i.useCallback)((function(){return r.current}),[]),l=Object(i.useCallback)((function(e){o.current.logicType=e,n(b.omit(o.current,"isHeadless"))}),[n]),u=Object(i.useCallback)((function(){o.current.logicType=c.LogicType.Undefined,null===a||void 0===a||a(),n(b.omit(o.current,"isHeadless"))}),[a,n]);return i.createElement("div",{className:"entry-expression",ref:r},i.createElement(ve,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:o.current,onLogicTypeUpdating:l,onLogicTypeResetting:u,getPlacementRef:s}))}),te=function(e){var t=e.data,n=e.row.index,a=e.onRowUpdate,r=t[n],c=Object(i.useRef)(Object(o.a)({uid:r.entryExpression.uid},r.entryExpression));Object(i.useEffect)((function(){c.current=r.entryExpression,a(n,Object(o.a)(Object(o.a)({},r),{},{entryExpression:c.current}))}),[r.entryExpression.logicType]);var s=Object(i.useCallback)((function(e){c.current=e,a(n,Object(o.a)(Object(o.a)({},r),{},{entryExpression:e}))}),[]);return i.createElement("div",{className:"context-entry-expression-cell"},i.createElement(ee,{expression:c.current,onUpdatingRecursiveExpression:s,onExpressionResetting:r.onExpressionResetting}))},ne=(n(291),function(e){var t=e.name,n=e.dataType,r=e.onContextEntryUpdate,o=e.editInfoPopoverLabel,c=Object(i.useState)(t),s=Object(a.a)(c,2),l=s[0],u=s[1],d=Object(i.useState)(n),p=Object(a.a)(d,2),b=p[0],f=p[1];Object(i.useEffect)((function(){u(t)}),[t]),Object(i.useEffect)((function(){f(n)}),[n]);var m=Object(i.useCallback)((function(e){var t=e.name,n=e.dataType;u(t),f(n),r(t,n)}),[r]),E=Object(i.useCallback)((function(e){return i.createElement("div",{className:"entry-definition ".concat(e)},i.createElement("p",{className:"entry-name pf-u-text-truncate",title:l},l),i.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:b},"(",b,")"))}),[b,l]),y=Object(i.useMemo)((function(){return i.createElement(O,{title:o,selectedExpressionName:l,selectedDataType:b,onExpressionUpdate:m},E("with-popover-menu"))}),[o,b,l,m,E]);return i.createElement("div",{className:"entry-info"},o?y:E())}),ae=function(e){var t=e.data,n=e.row.index,r=e.onRowUpdate,c=t[n],s=Object(i.useState)(c.entryInfo),l=Object(a.a)(s,2),u=l[0],d=l[1];Object(i.useEffect)((function(){d(c.entryInfo)}),[c.entryInfo]);var p=Object(i.useCallback)((function(e,t){r(n,Object(o.a)(Object(o.a)({},c),{},{entryInfo:{name:e,dataType:t}}))}),[c,n,r]);return i.createElement("div",{className:"context-entry-info-cell"},i.createElement(ne,{name:u.name,dataType:u.dataType,onContextEntryUpdate:p,editInfoPopoverLabel:c.editInfoPopoverLabel}))},ie="ContextEntry-1",re=c.DataType.Undefined,oe=function(e){var t=e.uid,n=e.name,r=void 0===n?ie:n,o=e.dataType,s=void 0===o?re:o,l=e.contextEntries,u=e.result,d=void 0===u?{}:u,f=e.renderResult,m=void 0===f||f,E=e.entryInfoWidth,v=void 0===E?c.DEFAULT_ENTRY_INFO_MIN_WIDTH:E,O=e.entryExpressionWidth,x=void 0===O?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:O,h=e.isHeadless,j=void 0!==h&&h,T=e.onUpdatingRecursiveExpression,C=Object(p.useBoxedExpressionEditorI18n)().i18n,g=Object(i.useState)(d),R=Object(a.a)(g,2),I=R[0],k=R[1],L=Object(i.useState)(v),D=Object(a.a)(L,2),S=D[0],H=D[1],U=Object(i.useState)(x),F=Object(a.a)(U,2),A=F[0],P=F[1],W=i.useContext(y).setSupervisorHash,_=Object(i.useMemo)((function(){return[{label:r,accessor:r,dataType:s,disableHandlerOnHeader:!0,columns:[{accessor:"entryInfo",disableHandlerOnHeader:!0,width:S,setWidth:H,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH},{accessor:"entryExpression",disableHandlerOnHeader:!0,width:A,setWidth:P,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}),[s,A,S,r]),M=Object(i.useState)(l||[{entryInfo:{name:ie,dataType:re},entryExpression:{},editInfoPopoverLabel:C.editContextEntry}]),B=Object(a.a)(M,2),K=B[0],V=B[1],z=Object(i.useCallback)((function(){return{entryInfo:{name:Object(c.generateNextAvailableEntryName)(b.map(K,(function(e){return e.entryInfo})),"ContextEntry"),dataType:c.DataType.Undefined},entryExpression:{},editInfoPopoverLabel:C.editContextEntry}}),[C.editContextEntry,K]),Y=Object(i.useCallback)((function(){return j?c.TableHeaderVisibility.None:c.TableHeaderVisibility.SecondToLastLevel}),[j]);return Object(i.useEffect)((function(){var e,n,i=Object(a.a)(_,1)[0],r={uid:t,logicType:c.LogicType.Context,name:i.accessor,dataType:i.dataType,contextEntries:K,result:b.omit(I,"isHeadless"),entryInfoWidth:S,entryExpressionWidth:A};j?null===T||void 0===T||T(b.omit(r,["name","dataType"])):(W(w(r)),null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastContextExpressionDefinition)||void 0===n||n.call(e,r))}),[_,j,T,K,I,S,A,t,W]),i.createElement("div",{className:"context-expression ".concat(t)},i.createElement(Z,{tableId:t,headerLevels:1,headerVisibility:Y(),defaultCell:{entryInfo:ae,entryExpression:te},columns:_,rows:K,onRowAdding:z,onRowsUpdate:V,handlerConfiguration:Object(c.getHandlerConfiguration)(C,C.contextEntry),getRowKey:Object(i.useCallback)(c.getEntryKey,[]),resetRowCustomFunction:Object(i.useCallback)(c.resetEntry,[])},m?[i.createElement(N,{key:"context-result",width:S,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH,onHorizontalResizeStop:function(e){return H(e)}},i.createElement("div",{className:"context-result"},"<result>")),i.createElement(N,{key:"context-expression",width:A,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH,onHorizontalResizeStop:function(e){return P(e)}},i.createElement(ee,{expression:I,onUpdatingRecursiveExpression:k}))]:void 0))},ce=n(91);var se=n(167),le=n.n(se),ue=function(){return i.createElement("div",null,"Decision Table")},de=(n(292),function(e){var t=e.isHeadless,n=e.items,r=e.onUpdatingRecursiveExpression,o=e.uid,s=e.width,l=void 0===s?430:s,u=Object(p.useBoxedExpressionEditorI18n)().i18n,d=Object(i.useMemo)((function(){return[{group:u.rows,items:[{name:u.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:u.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:u.rowOperations.delete,type:c.TableOperation.RowDelete},{name:u.rowOperations.clear,type:c.TableOperation.RowClear}]}]}),[u.rowOperations.clear,u.rowOperations.delete,u.rowOperations.insertAbove,u.rowOperations.insertBelow,u.rows]),f=Object(i.useCallback)((function(){return{logicType:c.LogicType.LiteralExpression}}),[]),m=Object(i.useCallback)((function(){return b.isEmpty(n)?[{entryExpression:f()}]:b.map(n,(function(e){return{entryExpression:e}}))}),[f,n]),E=Object(i.useState)(m()),v=Object(a.a)(E,2),O=v[0],x=v[1],h=Object(i.useState)(l||430),j=Object(a.a)(h,2),T=j[0],C=j[1],g=Object(i.useContext)(y).setSupervisorHash,R=Object(i.useCallback)((function(e){return e.original.entryExpression.uid}),[]),I=Object(i.useCallback)((function(){return{entryExpression:f()}}),[f]);Object(i.useEffect)((function(){var e,n,a={uid:o,logicType:c.LogicType.List,width:T,items:b.map(O,(function(e){return e.entryExpression}))};t?null===r||void 0===r||r(a):(g(w(a)),null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastListExpressionDefinition)||void 0===n||n.call(e,a))}),[T,O,t,r,o,g]);var k=Object(i.useCallback)((function(e){return{entryExpression:{uid:e.entryExpression.uid}}}),[]),L=Object(i.useCallback)((function(e){x(e)}),[]),N=Object(i.useMemo)((function(){return[{accessor:"list",width:T,setWidth:C}]}),[T]);return Object(i.useMemo)((function(){return i.createElement("div",{className:"list-expression"},i.createElement(Z,{tableId:o,headerVisibility:c.TableHeaderVisibility.None,defaultCell:{list:te},columns:N,rows:O,onRowsUpdate:L,onRowAdding:I,handlerConfiguration:d,getRowKey:R,resetRowCustomFunction:k}))}),[N,d,O,R,I,L,k,o])}),pe=(n(293),c.DataType.Undefined),be=function(e){var t=e.bindingEntries,n=e.dataType,r=void 0===n?pe:n,o=e.entryInfoWidth,s=void 0===o?c.DEFAULT_ENTRY_INFO_MIN_WIDTH:o,l=e.entryExpressionWidth,u=void 0===l?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:l,d=e.invokedFunction,f=void 0===d?"":d,m=e.isHeadless,E=e.logicType,v=e.name,O=void 0===v?"p-1":v,x=e.onUpdatingNameAndDataType,h=e.onUpdatingRecursiveExpression,j=e.uid,T=Object(p.useBoxedExpressionEditorI18n)().i18n,C=Object(i.useState)(t||[{entryInfo:{name:"p-1",dataType:pe},entryExpression:{},editInfoPopoverLabel:T.editParameter}]),g=Object(a.a)(C,2),R=g[0],I=g[1],k=Object(i.useState)(s),L=Object(a.a)(k,2),N=L[0],D=L[1],S=Object(i.useState)(u),H=Object(a.a)(S,2),U=H[0],F=H[1],A=Object(i.useState)(f),P=Object(a.a)(A,2),W=P[0],_=P[1],M=Object(i.useContext)(y).setSupervisorHash;Object(i.useEffect)((function(){var e,t,n=Object(a.a)(K.current,1)[0],i={uid:j,logicType:E,name:n.accessor,dataType:n.dataType,bindingEntries:R,invokedFunction:W,entryInfoWidth:N,entryExpressionWidth:U},r=b.omit(i,["name","dataType"]);m?null===h||void 0===h||h(r):(M(w(r)),null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastInvocationExpressionDefinition)||void 0===t||t.call(e,i))}),[U,W,N,m,E,h,R,M,j]);var B=i.createElement("div",{className:"function-definition-container"},i.createElement("input",{className:"function-definition pf-u-text-truncate",type:"text",placeholder:T.enterFunction,defaultValue:W,onBlur:function(e){return _(e.target.value)}})),K=Object(i.useRef)([{label:O,accessor:O,dataType:r,disableHandlerOnHeader:!0,columns:[{headerCellElement:B,accessor:"functionDefinition",disableHandlerOnHeader:!0,columns:[{accessor:"entryInfo",disableHandlerOnHeader:!0,width:N,setWidth:D,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH},{accessor:"entryExpression",disableHandlerOnHeader:!0,width:U,setWidth:F,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}]),V=Object(i.useCallback)((function(e){var t=Object(a.a)(e,1)[0];null===x||void 0===x||x(t.label,t.dataType);var n=Object(a.a)(K.current,1)[0];n.label=t.label,n.accessor=t.accessor,n.dataType=t.dataType}),[x]),z=Object(i.useCallback)((function(){return{entryInfo:{name:Object(c.generateNextAvailableEntryName)(b.map(R,(function(e){return e.entryInfo})),"p"),dataType:pe},entryExpression:{},editInfoPopoverLabel:T.editParameter}}),[T.editParameter,R]),Y=Object(i.useCallback)((function(){return m?c.TableHeaderVisibility.SecondToLastLevel:c.TableHeaderVisibility.Full}),[m]),X=Object(i.useCallback)((function(e){return I(e)}),[]),G=Object(i.useCallback)((function(e){return Object(c.getEntryKey)(e)}),[]),J=Object(i.useCallback)((function(e){return Object(c.resetEntry)(e)}),[]);return Object(i.useMemo)((function(){return i.createElement("div",{className:"invocation-expression ".concat(j)},i.createElement(Z,{tableId:j,headerLevels:2,headerVisibility:Y(),skipLastHeaderGroup:!0,defaultCell:{entryInfo:ae,entryExpression:te},columns:K.current,rows:R,onColumnsUpdate:V,onRowAdding:z,onRowsUpdate:X,handlerConfiguration:Object(c.getHandlerConfiguration)(T,T.parameters),getRowKey:G,resetRowCustomFunction:J}))}),[Y,G,T,V,z,J,R,X,j])},fe=(n(294),n(310)),me=function(e){var t=e.parameters,n=e.setParameters,a=Object(p.useBoxedExpressionEditorI18n)().i18n,r=Object(i.useCallback)((function(){n((function(e){return[].concat(Object(H.a)(e),[{name:Object(c.generateNextAvailableEntryName)(e,"p"),dataType:c.DataType.Undefined}])}))}),[n]),o=Object(i.useCallback)((function(e){return function(t){return n((function(n){return n[e].name=t.target.value,Object(H.a)(n)}))}}),[n]),s=Object(i.useCallback)((function(e){return function(t){n((function(n){return n[e].dataType=t,Object(H.a)(n)}))}}),[n]),l=Object(i.useCallback)((function(e){return function(){return n((function(t){return[].concat(Object(H.a)(t.slice(0,e)),Object(H.a)(t.slice(e+1)))}))}}),[n]);return i.createElement("div",{className:"parameters-editor"},i.createElement(ce.a,{variant:"tertiary",onClick:r,className:"add-parameter"},a.addParameter),i.createElement("div",{className:"parameters-container"},b.map(t,(function(e,t){return i.createElement("div",{key:"".concat(e.name,"_").concat(t),className:"parameter-entry"},i.createElement("input",{className:"parameter-name",type:"text",onBlur:o(t),defaultValue:e.name}),i.createElement(f,{selectedDataType:e.dataType,onDataTypeChange:s(t),menuAppendTo:"parent"}),i.createElement(ce.a,{variant:"danger",className:"delete-parameter",icon:i.createElement(fe.a,null),iconPosition:"left",onClick:l(t)},a.delete))}))))},Ee=(n(295),function(e){var t,n,a=e.selectedFunctionKind,r=e.onFunctionKindSelect,o=Object(p.useBoxedExpressionEditorI18n)().i18n,s=Object(i.useContext)(y),l=Object(i.useCallback)((function(e){return function(t,n){r(n),e()}}),[r]),u=Object(i.useCallback)((function(){return b.map(Object.values(c.FunctionKind),(function(e){return i.createElement(V.a,{key:e,itemId:e,"data-ouia-component-id":e},e)}))}),[]);return i.createElement(E,{title:o.selectFunctionKind,appendTo:null!==(t=null===(n=s.boxedExpressionEditorRef)||void 0===n?void 0:n.current)&&void 0!==t?t:void 0,className:"function-kind-popover",hasAutoWidth:!0,body:function(e){return i.createElement(M.a,{onSelect:l(e)},i.createElement(K.a,null,u()))}},i.createElement("div",{className:"selected-function-kind"},b.first(a)))}),ye=function(e){var t=void 0===e.parametersWidth?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:e.parametersWidth,n=void 0===e.formalParameters?[]:e.formalParameters,r=void 0===e.functionKind?c.FunctionKind.Feel:e.functionKind,o=void 0===e.name?"p-1":e.name,s=Object(i.useState)(t),l=Object(a.a)(s,2),u=l[0],d=l[1],f=Object(p.useBoxedExpressionEditorI18n)().i18n,m=Object(i.useContext)(y),v=m.boxedExpressionEditorRef,O=m.setSupervisorHash,x=Object(i.useState)(n),h=Object(a.a)(x,2),j=h[0],T=h[1],C=Object(i.useMemo)((function(){var e;return i.createElement(E,{title:f.editParameters,appendTo:null!==(e=null===v||void 0===v?void 0:v.current)&&void 0!==e?e:void 0,className:"parameters-editor-popover",minWidth:"400px",body:i.createElement(me,{parameters:j,setParameters:T})},i.createElement("div",{className:"parameters-list ".concat(b.isEmpty(j)?"empty-parameters":"")},i.createElement("p",{className:"pf-u-text-truncate"},b.isEmpty(j)?f.editParameters:"(".concat(b.join(b.map(j,(function(e){return e.name})),", "),")"))))}),[v,f.editParameters,j]),g=Object(i.useCallback)((function(){return[{label:o,accessor:o,dataType:e.dataType,disableHandlerOnHeader:!0,columns:[{headerCellElement:C,accessor:"parameters",disableHandlerOnHeader:!0,width:u,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}),[o,e.dataType,C,u]),R=Object(i.useCallback)((function(e){return[{entryInfo:{name:f.class,dataType:c.DataType.String},entryExpression:{noClearAction:!0,logicType:c.LogicType.LiteralExpression,content:e.class}},{entryInfo:{name:f.methodSignature,dataType:c.DataType.String},entryExpression:{noClearAction:!0,logicType:c.LogicType.LiteralExpression,content:e.method}}]}),[f.class,f.methodSignature]),I=Object(i.useCallback)((function(t){switch(t){case c.FunctionKind.Java:var n=e;return[{entryExpression:{logicType:c.LogicType.Context,noClearAction:!0,renderResult:!1,noHandlerMenu:!0,contextEntries:R(n)}}];case c.FunctionKind.Pmml:case c.FunctionKind.Feel:default:return[{entryExpression:e.expression||{logicType:c.LogicType.LiteralExpression}}]}}),[R,e]),k=Object(i.useRef)(g()),L=Object(i.useState)(r),N=Object(a.a)(L,2),D=N[0],S=N[1],H=Object(i.useState)(I(D)),U=Object(a.a)(H,2),F=U[0],A=U[1],P=Object(i.useCallback)((function(e,t){switch(t){case c.FunctionKind.Java:var n,a,i,r,o,s=null===(n=b.first(F))||void 0===n?void 0:n.entryExpression,l=(null===(a=b.nth(s.contextEntries,0))||void 0===a||null===(i=a.entryExpression)||void 0===i?void 0:i.content)||"",u=(null===(r=b.nth(s.contextEntries,1))||void 0===r||null===(o=r.entryExpression)||void 0===o?void 0:o.content)||"";return b.extend(e,{class:l,method:u});case c.FunctionKind.Pmml:case c.FunctionKind.Feel:default:var d;return b.extend(e,{expression:null===(d=b.first(F))||void 0===d?void 0:d.entryExpression})}}),[F]),W=Object(i.useCallback)((function(){var t,n,i,r=Object(a.a)(k.current,1)[0],o=P({uid:e.uid,logicType:e.logicType,name:r.accessor,dataType:r.dataType,functionKind:D,formalParameters:j,parametersWidth:u},D);e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,b.omit(o,["name","dataType"])):(O(w(F)),null===(n=window.beeApi)||void 0===n||null===(i=n.broadcastFunctionExpressionDefinition)||void 0===i||i.call(n,o))}),[P,O,j,e,D,F,u]),_=Object(i.useCallback)((function(){return e.isHeadless?c.TableHeaderVisibility.LastLevel:c.TableHeaderVisibility.Full}),[e.isHeadless]),M=Object(i.useCallback)((function(e){var t=e;S(t),A([{entryExpression:{logicType:c.LogicType.Undefined}}]),setTimeout((function(){A(I(t))}),0)}),[I]),B=Object(i.useCallback)((function(t){var n,i=Object(a.a)(t,1)[0];null===(n=e.onUpdatingNameAndDataType)||void 0===n||n.call(e,i.label,i.dataType),d(i.width);var r=Object(a.a)(k.current,1)[0];r.label=i.label,r.accessor=i.accessor,r.dataType=i.dataType,W()}),[k,e,W]);Object(i.useEffect)((function(){W()}),[F,W]),Object(i.useEffect)((function(){k.current=g()}),[j]);var K=Object(i.useCallback)((function(e){return S(c.FunctionKind.Feel),Object(c.resetEntry)(e)}),[]);return i.createElement("div",{className:"function-expression ".concat(e.uid)},i.createElement(Z,{handlerConfiguration:[{group:b.upperCase(f.function),items:[{name:f.rowOperations.clear,type:c.TableOperation.RowClear}]}],columns:k.current,onColumnsUpdate:B,rows:F,onRowsUpdate:A,headerLevels:1,headerVisibility:_(),controllerCell:i.createElement(Ee,{selectedFunctionKind:D,onFunctionKindSelect:M}),defaultCell:{parameters:te},resetRowCustomFunction:K}))},ve=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,r=e.onLogicTypeResetting,o=e.onUpdatingNameAndDataType,s=e.getPlacementRef,l=e.isHeadless,u=void 0!==l&&l,d=e.onUpdatingRecursiveExpression,f=Object(p.useBoxedExpressionEditorI18n)().i18n,m=Object(i.useContext)(y),v=b.extend(t,{uid:t.uid||le()(),isHeadless:u,onUpdatingNameAndDataType:o,onUpdatingRecursiveExpression:d}),O=function(e){return!b.isEmpty(e)&&e!==c.LogicType.Undefined},x=Object(i.useState)(O(v.logicType)),h=Object(a.a)(x,2),j=h[0],T=h[1];Object(i.useEffect)((function(){T(O(t.logicType))}),[t.logicType]);var C=function(){var e=Object(i.useRef)(null),t=Object(i.useState)("0px"),n=Object(a.a)(t,2),r=n[0],o=n[1],c=Object(i.useState)("0px"),s=Object(a.a)(c,2),l=s[0],u=s[1],d=Object(i.useState)(!1),p=Object(a.a)(d,2),b=p[0],f=p[1],m=Object(i.useCallback)((function(){b&&f(!1)}),[b]),E=Object(i.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),o("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),f(!0))}),[o,u]);return Object(i.useEffect)((function(){return document.addEventListener("click",m),document.addEventListener("contextmenu",m),document.addEventListener("contextmenu",E),function(){document.removeEventListener("click",m),document.removeEventListener("contextmenu",m),document.removeEventListener("contextmenu",E)}})),{contextMenuRef:e,contextMenuXPos:r,contextMenuYPos:l,contextMenuVisibility:b,setContextMenuVisibility:f}}(),g=C.contextMenuRef,w=C.contextMenuXPos,R=C.contextMenuYPos,I=C.contextMenuVisibility,k=C.setContextMenuVisibility,L=Object(i.useMemo)((function(){switch(v.logicType){case c.LogicType.LiteralExpression:return i.createElement(S,v);case c.LogicType.Relation:return i.createElement($,v);case c.LogicType.Context:return i.createElement(oe,v);case c.LogicType.DecisionTable:return i.createElement(ue,v);case c.LogicType.Invocation:return i.createElement(be,v);case c.LogicType.List:return i.createElement(de,v);case c.LogicType.Function:return i.createElement(ye,b.defaults(v,{functionKind:c.FunctionKind.Feel}));default:return v.logicType}}),[v.logicType]),N=Object(i.useCallback)((function(){return Object.values(c.LogicType).filter((function(e){return e!==c.LogicType.Undefined}))}),[]),D=Object(i.useCallback)((function(){return b.map(N(),(function(e){return i.createElement(V.a,{key:e,itemId:e},e)}))}),[N]),H=Object(i.useCallback)((function(){return s()}),[s]),U=Object(i.useCallback)((function(){var e,t;return null!==(e=null===(t=m.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:H}),[H,m.boxedExpressionEditorRef]),F=Object(i.useCallback)((function(e,t){T(!0),n(t)}),[n]),A=Object(i.useCallback)((function(){return i.createElement(E,{title:f.selectLogicType,arrowPlacement:H,appendTo:U(),className:"logic-type-popover",hasAutoWidth:!0,body:i.createElement(M.a,{onSelect:F},i.createElement(K.a,null,D()))})}),[f.selectLogicType,H,U,F,D]),P=Object(i.useCallback)((function(){T(!1),k(!1),r()}),[r,k]),W=Object(i.useCallback)((function(){return i.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:R,left:w}},i.createElement(ce.a,{isDisabled:!j,isSmall:!0,variant:ce.b.primary,onClick:P},f.clear))}),[j,w,R,P,f.clear]);return i.createElement("div",{className:"logic-type-selector ".concat(Q," ").concat(j?"logic-type-selected":"logic-type-not-present"),ref:g},j?L:f.selectExpression,j?null:A(),!t.noClearAction&&I?W():null)},Oe=function(e){var t=Object(i.useRef)(null),n=Object(i.useState)(e.selectedExpression),r=Object(a.a)(n,2),s=r[0],l=r[1],u=Object(i.useCallback)((function(e,t){l((function(n){return Object(o.a)(Object(o.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(i.useCallback)((function(e){l((function(t){return Object(o.a)(Object(o.a)({},t),{},{logicType:e})}))}),[]),p=Object(i.useCallback)((function(){l((function(e){var t,n,a={uid:e.uid,name:e.name,dataType:e.dataType,logicType:c.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(i.useCallback)((function(){return t.current}),[]);return i.createElement("div",{className:"expression-container"},i.createElement("div",{className:"expression-name-and-logic-type"},i.createElement("span",{className:"expression-title"},s.name),i.createElement("span",{className:"expression-type"},"(",s.logicType||c.LogicType.Undefined,")")),i.createElement("div",{className:"expression-container-box",ref:t,"data-ouia-component-id":"expression-container"},i.createElement(ve,{selectedExpression:s,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:u,getPlacementRef:b})))},xe=function(e){var t=Object(i.useState)((function(){return b.identity})),n=Object(a.a)(t,2),o=n[0],c=n[1],s=Object(i.useRef)(null),l=Object(i.useState)(w(e.expressionDefinition)),u=Object(a.a)(l,2),d=u[0],f=u[1];return Object(i.useMemo)((function(){return i.createElement(r.I18nDictionariesProvider,{defaults:p.boxedExpressionEditorI18nDefaults,dictionaries:p.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:p.BoxedExpressionEditorI18nContext},i.createElement(y.Provider,{value:{supervisorHash:d,setSupervisorHash:f,boxedExpressionEditorRef:s,currentlyOpenedHandlerCallback:o,setCurrentlyOpenedHandlerCallback:c}},i.createElement(D,null,i.createElement("div",{className:"boxed-expression-editor",ref:s},i.createElement(Oe,e.expressionDefinition)))))}),[e.expressionDefinition])}}},[[172,1,2]]]);
//# sourceMappingURL=main.0026ce27.chunk.js.map