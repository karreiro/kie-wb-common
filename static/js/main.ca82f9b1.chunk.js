(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){"use strict";var a;!function(e){e.Sum="+",e.Count="#",e.Min="<",e.Max=">"}(a||(a={}))},113:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return u}));var a=n(9),i=n(49),r=150,o=370,c=function(e,t){return[{group:t,items:[{name:e.rowOperations.insertAbove,type:i.b.RowInsertAbove},{name:e.rowOperations.insertBelow,type:i.b.RowInsertBelow},{name:e.rowOperations.delete,type:i.b.RowDelete},{name:e.rowOperations.clear,type:i.b.RowClear}]}]},l=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r="".concat(n,"-").concat(i),o=a.find(t,{entryInfo:{name:r}});return o?e(t,n,i+1):r},s=function(e){return e.original.entryInfo.name},u=function(e){return{entryInfo:e.entryInfo,entryExpression:{uid:e.entryExpression.uid}}}},115:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},116:function(e,t){},117:function(e,t){},118:function(e,t,n){"use strict";var a;!function(e){e.Unique="UNIQUE",e.First="FIRST",e.Priority="PRIORITY",e.Any="ANY",e.Collect="COLLECT",e.RuleOrder="RULE ORDER",e.OutputOrder="OUTPUT ORDER"}(a||(a={}))},119:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},120:function(e,t){},121:function(e,t,n){},145:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u}));var a=n(0),i=n(14),r=n(160),o=Object(i.a)(Object(i.a)({},r.en),{},{choose:"Choose...",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionTable:"Decision Table",editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editParameter:"Edit Parameter",editRelation:"Edit Relation",enterFunction:"Enter function",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",name:"Name",parameters:"PARAMETERS",relation:"Relation",rowOperations:{clear:"Clear",delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectLogicType:"Select logic type"}),c={locale:"en",dictionary:o},l=new Map([["en",o]]),s=a.createContext({});function u(){return Object(a.useContext)(s)}},146:function(e,t,n){"use strict";var a=n(80),i=n(0),r=n(32);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));n(2);window.renderBoxedExpressionEditor=function(e,t){r.render(i.createElement(a.a,{expressionDefinition:{selectedExpression:t}}),document.getElementById(e))}},170:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return c}));var a=n(4),i=n(0),r=n(32),o=(n(176),n(146)),c=function(){var e={uid:"id1",logicType:"Context",name:"Expression Name",dataType:"<Undefined>",contextEntries:[{entryInfo:{name:"ContextEntry-1",dataType:"<Undefined>"},entryExpression:{uid:"id2",logicType:"Context",contextEntries:[{entryInfo:{name:"ContextEntry-1",dataType:"<Undefined>"},entryExpression:{}}],result:{uid:"id9"}}}],result:{uid:"id3",logicType:"Context",contextEntries:[{entryInfo:{name:"ContextEntry-1",dataType:"<Undefined>"},entryExpression:{uid:"id4",logicType:"Context",contextEntries:[{entryInfo:{name:"ContextEntry-1",dataType:"<Undefined>"},entryExpression:{uid:"id6",logicType:"Context",contextEntries:[{entryInfo:{name:"ContextEntry-1",dataType:"<Undefined>"},entryExpression:{}}],result:{uid:"id11"}}}],result:{uid:"id7"}}}],result:{uid:"id5"}}},t=Object(i.useState)(e),n=Object(a.a)(t,2),r=n[0],c=n[1],l={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return c(e)},broadcastLiteralExpressionDefinition:function(e){return c(e)},broadcastRelationExpressionDefinition:function(e){return c(e)},broadcastContextExpressionDefinition:function(e){return c(e)},broadcastListExpressionDefinition:function(e){return c(e)},broadcastInvocationExpressionDefinition:function(e){return c(e)}},i.createElement("div",{className:"showcase"},i.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",maxHeight:"initial"},className:"boxed-expression"},i.createElement(o.BoxedExpressionEditor,{expressionDefinition:l})),i.createElement("div",{style:{display:"none"},className:"updated-json"},i.createElement("p",{className:"disclaimer"},"\u26a0 Currently, JSON gets updated only for literal expression, relation, context, list and invocation logic types"),i.createElement("pre",null,JSON.stringify(r,null,2))))};r.render(i.createElement(c,null),document.getElementById("root"))},176:function(e,t,n){},177:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},2:function(e,t,n){"use strict";n(111),n(112);var a=n(113);n.d(t,"DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH",(function(){return a.a})),n.d(t,"DEFAULT_ENTRY_INFO_MIN_WIDTH",(function(){return a.b})),n.d(t,"generateNextAvailableEntryName",(function(){return a.c})),n.d(t,"getEntryKey",(function(){return a.d})),n.d(t,"getHandlerConfiguration",(function(){return a.e})),n.d(t,"resetEntry",(function(){return a.f}));var i=n(115);n.d(t,"DataType",(function(){return i.a}));var r=n(116);n.o(r,"LogicType")&&n.d(t,"LogicType",(function(){return r.LogicType})),n.o(r,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return r.TableHeaderVisibility})),n.o(r,"TableOperation")&&n.d(t,"TableOperation",(function(){return r.TableOperation}));var o=n(117);n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return o.TableHeaderVisibility})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation}));n(118);var c=n(119);n.d(t,"LogicType",(function(){return c.a}));var l=n(49);n.d(t,"TableHeaderVisibility",(function(){return l.a})),n.d(t,"TableOperation",(function(){return l.b}))},210:function(e,t,n){},212:function(e,t,n){},28:function(e,t,n){"use strict";var a=n(120);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var i=n(145);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return i.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return i.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return i.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return i.d}))},284:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},49:function(e,t,n){"use strict";var a,i;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),function(e){e[e.Full=0]="Full",e[e.LastLevel=1]="LastLevel",e[e.SecondToLastLevel=2]="SecondToLastLevel",e[e.None=3]="None"}(a||(a={})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete",e[e.RowClear=6]="RowClear"}(i||(i={}))},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return de}));n(177);var a=n(4),i=n(0),r=(n(178),n(179),n(180),n(147)),o=n(14),c=(n(181),n(2)),l=(n(182),n(183),n(298)),s=(n(184),n(307)),u=(n(185),function(e){var t=e.children,n=e.arrowPlacement,a=e.body,r=e.title,o=e.appendTo,c=e.className,l=e.hasAutoWidth;return i.createElement(s.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector".concat(c?" "+c:""),hasAutoWidth:l,position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:o,headerContent:i.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},r),bodyContent:a},t)}),d=n(28),p=n(50),b=n(306),f=n(7),m=n(9),E=i.createContext({}),y="Expression Name",O=function(e){var t,n,r,o,l,s,O=e.children,v=e.appendTo,x=e.arrowPlacement,h=e.title,C=e.nameField,j=e.dataTypeField,T=e.selectedDataType,g=void 0===T?c.DataType.Undefined:T,w=e.selectedExpressionName,R=e.onExpressionUpdate,I=Object(i.useContext)(E),L=Object(d.useBoxedExpressionEditorI18n)().i18n;h=null!==(t=h)&&void 0!==t?t:L.editExpression,C=null!==(n=C)&&void 0!==n?n:L.name,j=null!==(r=j)&&void 0!==r?r:L.dataType,v=null!==(o=null!==(l=v)&&void 0!==l?l:null===(s=I.boxedExpressionEditorRef)||void 0===s?void 0:s.current)&&void 0!==o?o:void 0;var N=Object(i.useState)(!1),k=Object(a.a)(N,2),D=k[0],H=k[1],U=Object(i.useState)(g),S=Object(a.a)(U,2),A=S[0],P=S[1],_=Object(i.useState)(w),W=Object(a.a)(_,2),F=W[0],B=W[1];Object(i.useEffect)((function(){B(w)}),[w]),Object(i.useEffect)((function(){P(g)}),[g]);var z=Object(i.useCallback)((function(e){B(e.target.value),"blur"===e.type&&R({name:e.target.value,dataType:A})}),[A,R]),M=Object(i.useCallback)((function(e,t){H(!1),P(t),R({name:F,dataType:t})}),[F,R]),V=Object(i.useCallback)((function(){return m.map(Object.values(c.DataType),(function(e){return i.createElement(p.a,{key:e,value:e},e)}))}),[]),Y=Object(i.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return V()}return""!==e.target.value?V().filter((function(e){return t.test(e.props.value)})):V()}),[V]),K=Object(i.useCallback)((function(e){return H(e)}),[]);return i.createElement(u,{title:h,arrowPlacement:x,appendTo:v,body:i.createElement("div",{className:"edit-expression-menu"},i.createElement("div",{className:"expression-name"},i.createElement("label",null,C),i.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:F,onChange:z,onBlur:z,className:"form-control pf-c-form-control",placeholder:y})),i.createElement("div",{className:"expression-data-type"},i.createElement("label",null,j),i.createElement(b.a,{ouiaId:"edit-expression-data-type",variant:f.e.typeahead,typeAheadAriaLabel:L.choose,onToggle:K,onSelect:M,onFilter:Y,isOpen:D,selections:A,hasInlineFilter:!0,inlineFilterPlaceholderText:L.choose},V())))},O)},v=(n(121),n(162)),x=n(163),h=n(11),C=n(12),j=function(){function e(t,n,a){Object(h.a)(this,e),this.element=t,this.children=n,this.depth=a,this.id=void 0,this.lastColumn=void 0,this.rect=void 0}return Object(C.a)(e,[{key:"getId",value:function(){return void 0===this.id&&(this.id=m.first([].slice.call(this.element.classList).filter((function(e){return e.match(/uuid-/g)})))||""),this.id}},{key:"getRect",value:function(){return void 0===this.rect&&(this.rect=this.element.getBoundingClientRect()),this.rect}},{key:"isLastColumn",value:function(){if(void 0===this.lastColumn){var e=this.element.closest("tr"),t=(null===e||void 0===e?void 0:e.lastChild)==this.element.closest("th, td");this.lastColumn=t}return this.lastColumn}},{key:"setWidth",value:function(e){var t=e<100?100:e;document.dispatchEvent(new CustomEvent(this.getId(),{detail:{width:t}})),this.element.style.width=t+"px"}},{key:"refreshWidthAsParent",value:function(){this.setWidth(this.fetchChildWidth()+e.PADDING)}},{key:"refreshWidthAsLastColumn",value:function(){var t;if(this.isLastColumn()){var n=null===(t=this.element.closest("tr"))||void 0===t?void 0:t.getBoundingClientRect();if(void 0!==n){var a=this.element.getBoundingClientRect(),i=n.right-a.x-15;this.setWidth(i+e.PADDING)}}}},{key:"fetchChildWidth",value:function(){var t=this.element.querySelector("thead");return(null===t||void 0===t?void 0:t.getBoundingClientRect().width)||e.DEFAULT_WIDTH}}]),e}();j.DEFAULT_WIDTH=250,j.PADDING=14;var T=function(){function e(){Object(h.a)(this,e),this.cells=void 0}return Object(C.a)(e,[{key:"getCells",value:function(){return void 0===this.cells&&(this.cells=this.buildCells()),this.cells}},{key:"buildCells",value:function(){var e=this,t=[];return this.fetchCellElements(document.body).forEach((function(n){e.buildCell(n,t,0)})),t}},{key:"buildCell",value:function(e,t,n){var a=this,i=t.find((function(t){return t.element===e}));if(i)return i;var r=new j(e,this.fetchCellElements(e).map((function(e){return a.buildCell(e,t,n+1)})).filter((function(e){return e.depth==n+1})),n);return t.push(r),r}},{key:"fetchCellElements",value:function(t){var n=t.querySelectorAll(e.CELL_CSS_SELCTOR);return[].slice.call(n)}}]),e}();T.CELL_CSS_SELCTOR=".react-resizable";var g=function(){function e(){Object(h.a)(this,e),this.domSession=void 0,this.domSession=new T}return Object(C.a)(e,[{key:"updateSize",value:function(e){e.children.length>0&&e.refreshWidthAsParent()}},{key:"updateLastColumns",value:function(e){e.refreshWidthAsLastColumn()}},{key:"execute",value:function(){for(var e=this.domSession.getCells(),t=performance.now(),n=0;n<10;n++)e.sort((function(e,t){return t.depth-e.depth})).forEach(this.updateSize),e.sort((function(e,t){return e.depth-t.depth})).forEach(this.updateLastColumns);var a=performance.now();console.log(a-t+"ms")}}]),e}(),w=i.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},i.createElement("div",{className:"pf-c-drawer__splitter-handle"})),R=function(e){var t=e.children,n=e.height,r=e.minHeight,o=void 0===r?0:r,c=(e.minWidth,e.onHorizontalResizeStop,e.width,"100%"===n?0:n),l=Object(i.useMemo)((function(){return i.createElement("div",{className:"pf-c-drawer"},w)}),[]),s=Object(i.useMemo)((function(){return"uuid-".concat(Object(x.v4)())}),[]),u=Object(i.useState)(300),d=Object(a.a)(u,2),p=d[0],b=d[1],f=Object(i.useState)([]),m=Object(a.a)(f,2),E=m[0],y=m[1],O=Object(i.useState)(0),h=Object(a.a)(O,2),C=h[0],j=h[1];Object(i.useLayoutEffect)((function(){function e(e){var t=e.detail.width;b(t)}return document.addEventListener(s,e),function(){document.removeEventListener(s,e)}}),[s]);var g=Object(i.useCallback)((function(){var e=[],t=(new T).getCells(),n=t.find((function(e){return e.getId()===s})),a=n.getRect().width,i=n.element.closest("table"),r=!1;n.isLastColumn()?t.filter((function(e){return e.isLastColumn()})).forEach((function(t){e.push(t)})):(t.forEach((function(t){var a,o=t.getRect().x<=n.getRect().x&&t.getRect().right>=n.getRect().right;((null===i||void 0===i?void 0:i.contains(t.element))||(null===(a=t.element)||void 0===a?void 0:a.contains(n.element)))&&o&&(e.push(t),t.isLastColumn()&&(r=!0))})),r&&t.filter((function(e){return e.isLastColumn()&&!(null===i||void 0===i?void 0:i.contains(e.element))})).forEach((function(t){e.push(t)}))),e.forEach((function(e){e.element.setAttribute("data-initial-w",e.element.style.width)})),y(e),j(a)}),[s]),R=Object(i.useCallback)((function(e,t){var n=t.size.width<100?100:t.size.width;E.forEach((function(e){var t=n-C;e.getId()!==s&&(e.element.style.width=parseInt(e.element.getAttribute("data-initial-w")||"")+t+"px")}),[])}),[E,s,C]),I=Object(i.useCallback)((function(e,t){E.forEach((function(e){var n=(t.size.width<100?100:t.size.width)-C;document.dispatchEvent(new CustomEvent(e.getId(),{detail:{width:parseInt(e.element.getAttribute("data-initial-w")||"")+n}}))}),[])}),[E,C]);return Object(i.useMemo)((function(){return i.createElement(v.ResizableBox,{className:"".concat("100%"===n?"height-based-on-content":""," ").concat(s),width:p,height:c,minConstraints:[100,o],axis:"x",onResizeStop:I,onResize:R,onResizeStart:g,handle:l},t)}),[n,s,p,c,o,I,R,g,l,t])},I=function(e){var t=e.children,n=Object(i.useContext)(E);return Object(i.useEffect)((function(){(new g).execute()}),[n]),i.createElement("div",null,t)},L=function(e){var t=e.uid,n=e.content,a=void 0===n?"":n,r=e.dataType,s=void 0===r?c.DataType.Undefined:r,u=e.name,d=void 0===u?y:u,p=e.onUpdatingNameAndDataType,b=e.isHeadless,f=void 0!==b&&b,m=e.onUpdatingRecursiveExpression,E=e.width,v=Object(i.useRef)(d),x=Object(i.useRef)(s),h=Object(i.useRef)(a),C=Object(i.useRef)(E||250),j=Object(i.useCallback)((function(){var e,n,a=Object(o.a)({uid:t,name:v.current,dataType:x.current,logicType:c.LogicType.LiteralExpression,content:h.current},f||250===C.current?{}:{width:C.current});f?null===m||void 0===m||m(a):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastLiteralExpressionDefinition)||void 0===n||n.call(e,a)}),[f,m,t]),T=Object(i.useCallback)((function(e){var t=e.dataType,n=void 0===t?c.DataType.Undefined:t,a=e.name,i=void 0===a?y:a;v.current=i,x.current=n,null===p||void 0===p||p(i,n),j()}),[p,j]),g=Object(i.useCallback)((function(e){h.current=e.target.value,j()}),[j]),w=Object(i.useCallback)((function(e){C.current=e,j()}),[j]),I=Object(i.useCallback)((function(e){return i.createElement(R,{width:C.current,height:40,minWidth:250,minHeight:40,onHorizontalResizeStop:w},e)}),[w]),L=Object(i.useMemo)((function(){return i.createElement("div",{className:"literal-expression-header"},I(i.createElement(O,{selectedExpressionName:v.current,selectedDataType:x.current,onExpressionUpdate:T},i.createElement("div",{className:"expression-info"},i.createElement("p",{className:"expression-name pf-u-text-truncate"},v.current),i.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",x.current,")")))))}),[T,I]),N=Object(i.useMemo)((function(){return i.createElement(l.a,{defaultValue:h.current,onBlur:g,"aria-label":"literal-expression-content"})}),[g]);return Object(i.useEffect)((function(){j()}),[j]),i.createElement("div",{className:"literal-expression"},f?null:L,i.createElement("div",{className:"literal-expression-body"},N))},N=(n(210),n(211),n(10)),k=(n(212),n(95)),D=n(311),H=n(305),U=n(299),S=n(300),A=function(e){var t=e.tableInstance,n=e.children,a=e.headerVisibility,r=void 0===a?c.TableHeaderVisibility.Full:a,o=e.getRowKey,l=e.getColumnKey,s=Object(i.useCallback)((function(e){return i.createElement("div",Object.assign({className:"pf-c-drawer drawer-on-body"},e.column.canResizeOnCell?e.column.getResizerProps():{}),w)}),[]),u=Object(i.useCallback)((function(e,n,a){var r=0===e?"counter-cell":"data-cell",o=n.column.canResizeOnCell?"has-resizer":"";return i.createElement(H.a,Object.assign({},0===e?{}:n.getCellProps(),t.getTdProps(e,a),{key:"".concat(l(n.column),"-").concat(e),"data-ouia-component-id":"expression-column-"+e,className:"".concat(r," ").concat(o)}),0===e?a+1:n.render("Cell"),n.column.canResizeOnCell?s(n):null)}),[l,s,t]),d=Object(i.useCallback)((function(e,t){return i.createElement(U.a,Object.assign({className:"table-row"},e.getRowProps(),{key:"".concat(o(e),"-").concat(t),ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return u(n,e,t)})))}),[o,u]),p=Object(i.useMemo)((function(){return i.createElement(U.a,{className:"table-row additive-row"},i.createElement(H.a,{role:"cell",className:"empty-cell"},i.createElement("br",null)),null===n||void 0===n?void 0:n.map((function(e,t){return i.createElement(H.a,{role:"cell",key:t,className:"row-remainder-content",style:{}},e)})))}),[n,t.allColumns]);return i.createElement(S.a,Object.assign({className:"".concat(r===c.TableHeaderVisibility.None?"missing-header":"")},t.getTableBodyProps()),t.rows.map((function(e,n){return t.prepareRow(e),d(e,n)})),n?p:null)},P=(n(284),n(301)),_=n(302),W=n(303),F=n(309),B=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,a=e.onOperation;return i.createElement(P.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return a(t)}},t.map((function(e){return i.createElement(_.a,{key:e.group,label:e.group,className:m.every(e.items,(function(e){return!m.includes(n,e.type)}))?"no-allowed-actions-in-group":""},i.createElement(W.a,null,e.items.map((function(e){return i.createElement(F.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!m.includes(n,e.type)},e.name)}))))})))},z=function(e){var t=e.columnPrefix,n=e.tableColumns,r=e.lastSelectedColumnIndex,o=e.lastSelectedRowIndex,l=e.tableRows,u=e.onRowsUpdate,d=e.onRowAdding,p=e.showTableHandler,b=e.setShowTableHandler,f=e.tableHandlerTarget,y=e.handlerConfiguration,O=e.tableHandlerAllowedOperations,v=e.resetRowCustomFunction,x=void 0===v?function(){return{}}:v,h=e.onColumnsUpdate,C=Object(i.useContext)(E),j=Object(i.useState)(r),T=Object(a.a)(j,2),g=T[0],w=T[1],R=Object(i.useState)(o),I=Object(a.a)(R,2),L=I[0],k=I[1];Object(i.useEffect)((function(){w(r)}),[r]),Object(i.useEffect)((function(){k(o)}),[o]);var D=function(e,t,n){return[].concat(Object(N.a)(e.slice(0,t)),[n],Object(N.a)(e.slice(t)))},H=function(e,t,n){return[].concat(Object(N.a)(e.slice(0,t+1)),[n],Object(N.a)(e.slice(t+1)))},U=function(e,t){return[].concat(Object(N.a)(e.slice(0,t)),Object(N.a)(e.slice(t+1)))},S=Object(i.useCallback)((function(e){var a="".concat(t).concat(e);return m.find(n.current,{accessor:a})?S(e+1):a}),[t,n]),A=Object(i.useCallback)((function(e){return{accessor:S(e.length),label:S(e.length),dataType:c.DataType.Undefined}}),[S]),P=Object(i.useCallback)((function(e){h(e),u(l.current)}),[h,u,l]),_=Object(i.useCallback)((function(e){switch(e){case c.TableOperation.ColumnInsertLeft:P(D(n.current,g,A(n.current)));break;case c.TableOperation.ColumnInsertRight:P(H(n.current,g,A(n.current)));break;case c.TableOperation.ColumnDelete:P(U(n.current,g));break;case c.TableOperation.RowInsertAbove:u(D(l.current,L,d()));break;case c.TableOperation.RowInsertBelow:u(H(l.current,L,d()));break;case c.TableOperation.RowDelete:u(U(l.current,L));break;case c.TableOperation.RowClear:u((t=l.current,a=L,[].concat(Object(N.a)(t.slice(0,a)),[x(t[a])],Object(N.a)(t.slice(a+1)))))}var t,a;b(!1)}),[A,P,d,u,g,L,b,n,l]);return Object(i.useMemo)((function(){var e,t;return i.createElement(s.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:p,shouldClose:function(){return b(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return f},appendTo:null!==(e=null===(t=C.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:void 0,bodyContent:i.createElement(B,{handlerConfiguration:y,allowedOperations:O,onOperation:_})})}),[p,C.boxedExpressionEditorRef,y,O,_,b,f])},M=n(308),V=n(304),Y=function(e){var t=e.tableInstance,n=e.tableRows,a=e.onRowsUpdate,r=e.editColumnLabel,o=e.headerVisibility,l=void 0===o?c.TableHeaderVisibility.Full:o,s=e.skipLastHeaderGroup,u=e.getColumnKey,d=e.tableColumns,p=e.onColumnsUpdate,b=Object(i.useCallback)((function(e,t){return a(m.map(n.current,(function(n){var a=n[e];return delete n[e],n[t]=a,n})))}),[a,n]),f=Object(i.useCallback)((function(e){return function(t){var n=t.name,a=void 0===n?"":n,i=t.dataType,r=void 0===i?c.DataType.Undefined:i,o=d.current[e].accessor,l=Object(N.a)(d.current);l[e].label=a,l[e].accessor=a,l[e].dataType=r,p(l),a!==o&&b(o,a)}}),[p,d,b]),E=Object(i.useCallback)((function(e,t){return i.createElement(M.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column no-clickable-cell",key:"".concat(u(e),"-").concat(t)}),i.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[u]),y=Object(i.useCallback)((function(e){return i.createElement("div",{className:"header-cell-info","data-ouia-component-type":"expression-column-header-cell-info"},e.headerCellElement?e.headerCellElement:i.createElement("p",{className:"pf-u-text-truncate"},e.label),e.dataType?i.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")"):null)}),[]),v=Object(i.useCallback)((function(e){}),[]),x=Object(i.useCallback)((function(e,n){return i.createElement(M.a,Object.assign({},e.getHeaderProps(),t.getThProps(e,n),{className:"resizable-column ".concat(e.dataType?null:"no-clickable-cell"),key:"".concat(u(e),"-").concat(n)}),i.createElement(R,{width:300,height:"100%",minWidth:10,onHorizontalResizeStop:v},i.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.dataType?i.createElement(O,{title:r,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:f(n),key:"".concat(u(e),"-").concat(n)},y(e)):y(e))))}),[r,u,f,y,t]),h=Object(i.useCallback)((function(e,t){return e.isCountColumn?E(e,t):x(e,t)}),[E,x]),C=Object(i.useCallback)((function(e){return s?m.dropRight(e.headerGroups):e.headerGroups}),[s]),j=Object(i.useMemo)((function(){return C(t).map((function(e){return i.createElement(U.a,Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e,t){return h(e,t)})))}))}),[C,h,t]),T=Object(i.useCallback)((function(e){return i.createElement(U.a,null,m.nth(t.headerGroups,e).headers.map((function(e,t){return h(e,t)})))}),[h,t.headerGroups]);switch(l){case c.TableHeaderVisibility.Full:return i.createElement(V.a,{noWrap:!0},j);case c.TableHeaderVisibility.LastLevel:return i.createElement(V.a,{noWrap:!0},T(-1));case c.TableHeaderVisibility.SecondToLastLevel:return i.createElement(V.a,{noWrap:!0},T(-2));default:return null}},K="no-table-context-menu",G=function(e){var t=e.tableId,n=e.children,r=e.columnPrefix,l=void 0===r?"column-":r,s=e.editColumnLabel,u=e.onColumnsUpdate,d=e.onRowsUpdate,p=e.onRowAdding,b=void 0===p?function(){return{}}:p,f=e.defaultCell,y=e.rows,O=e.columns,v=e.handlerConfiguration,x=e.headerVisibility,h=e.headerLevels,C=void 0===h?0:h,j=e.skipLastHeaderGroup,T=void 0!==j&&j,g=e.getRowKey,w=void 0===g?function(e){return e.id}:g,R=e.getColumnKey,I=void 0===R?function(e){return e.id}:R,L=e.resetRowCustomFunction,H=Object(i.useRef)(null),U=Object(i.useContext)(E),S={label:"#",accessor:"#",width:60,minWidth:60,isCountColumn:!0};!function e(t,n){n>0&&(m.assign(t,{columns:[{label:"0",accessor:"0",minWidth:60,width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}),e(t.columns[0],n-1))}(S,C);var P=Object(i.useRef)([S].concat(Object(N.a)(O))),_=Object(i.useRef)(y),W=Object(i.useState)(!1),F=Object(a.a)(W,2),B=F[0],M=F[1],V=Object(i.useState)(document.body),G=Object(a.a)(V,2),X=G[0],J=G[1],q=Object(i.useState)(m.values(c.TableOperation).map((function(e){return parseInt(e.toString())}))),Q=Object(a.a)(q,2),Z=Q[0],$=Q[1],ee=Object(i.useState)(-1),te=Object(a.a)(ee,2),ne=te[0],ae=te[1],ie=Object(i.useState)(-1),re=Object(a.a)(ie,2),oe=re[0],ce=re[1],le=Object(i.useCallback)((function(e){P.current=e,null===u||void 0===u||u(e.slice(1))}),[u]),se=Object(i.useCallback)((function(e){_.current=e,null===d||void 0===d||d(e)}),[d]),ue=Object(i.useCallback)((function(e,t,n){var a=Object(N.a)(_.current);a[e][t]=n,se(a)}),[se]),de=Object(i.useCallback)((function(e,t){var n=Object(N.a)(_.current);n[e]=t,se(n)}),[se]),pe={minWidth:150,width:150,Cell:Object(i.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:f?f[t.id](e):function(e){var t=e.value,n=e.row.index,r=e.column.id,o=e.onCellUpdate,c=i.useState(t),l=Object(a.a)(c,2),s=l[0],u=l[1];Object(i.useEffect)((function(){u(t)}),[t]);var d=Object(i.useCallback)((function(e){u(e.target.value)}),[]),p=Object(i.useCallback)((function(){o(n,r,s)}),[r,n,s,o]);return i.createElement("textarea",{value:s||"",onChange:d,onBlur:p})}(e)}),[])},be=function(e){var t=e.closest("table")===H.current,n=!e.classList.contains(K);return t&&n},fe=function(e,t){var n,a;J(e),null===(n=U.currentlyOpenedHandlerCallback)||void 0===n||n.call(U,!1),M(!0),null===(a=U.setCurrentlyOpenedHandlerCallback)||void 0===a||a.call(U,(function(){return M})),ae(t)},me=Object(k.useTable)({columns:P.current,data:_.current,defaultColumn:pe,onCellUpdate:ue,onRowUpdate:de,getThProps:function(e,t){return{onContextMenu:function(n){var a=n.target,i=!e.disableHandlerOnHeader;be(a)&&i&&(n.preventDefault(),$([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(N.a)(P.current.length>2&&t>0?[c.TableOperation.ColumnDelete]:[]))),fe(a,t))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;be(a)&&(n.preventDefault(),$([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(N.a)(P.current.length>2&&e>0?[c.TableOperation.ColumnDelete]:[]),[c.TableOperation.RowInsertAbove,c.TableOperation.RowInsertBelow],Object(N.a)(_.current.length>1?[c.TableOperation.RowDelete]:[]),[c.TableOperation.RowClear])),fe(a,e),ce(t))}}}},k.useBlockLayout,k.useResizeColumns),Ee=function e(t,n,a){var i=m.findIndex(t,{accessor:n});if(i>=0){var r=Object(o.a)({},t[i]);r.width=a,t.splice(i,1,r)}else m.forEach(t,(function(t){return e(t.columns,n,a)}))},ye=null===me.state.columnResizing.isResizingColumn&&!m.isEmpty(me.state.columnResizing.columnWidths);return Object(i.useEffect)((function(){ye&&(m.forEach(me.state.columnResizing.columnWidths,(function(e,t){return Ee(P.current,t,e)})),le(P.current))}),[ye]),i.createElement("div",{className:"table-component ".concat(t)},i.createElement(D.a,Object.assign({variant:"compact"},me.getTableProps(),{ref:H}),i.createElement(Y,{tableInstance:me,editColumnLabel:s,headerVisibility:x,skipLastHeaderGroup:T,tableRows:_,onRowsUpdate:se,tableColumns:P,getColumnKey:I,onColumnsUpdate:le}),i.createElement(A,{tableInstance:me,getRowKey:w,getColumnKey:I,headerVisibility:x},n)),B?i.createElement(z,{tableColumns:P,columnPrefix:l,handlerConfiguration:v,lastSelectedColumnIndex:ne,lastSelectedRowIndex:oe,tableRows:_,onRowsUpdate:se,onRowAdding:b,showTableHandler:B,setShowTableHandler:M,tableHandlerAllowedOperations:Z,tableHandlerTarget:X,resetRowCustomFunction:L,onColumnsUpdate:le}):null)},X=function(e){var t=Object(d.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:c.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:c.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:c.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:c.TableOperation.RowDelete}]}],a=Object(i.useRef)(void 0===e.columns?[{name:"column-1",dataType:c.DataType.Undefined}]:e.columns),r=Object(i.useRef)(void 0===e.rows?[[""]]:e.rows),l=Object(i.useCallback)((function(){var t,n,i,c=Object(o.a)(Object(o.a)({},e),{},{columns:a.current,rows:r.current});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,c):null===(n=window.beeApi)||void 0===n||null===(i=n.broadcastRelationExpressionDefinition)||void 0===i||i.call(n,c)}),[e]),s=Object(i.useCallback)((function(){return m.map(a.current,(function(e){return Object(o.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[]),u=Object(i.useCallback)((function(){return m.map(r.current,(function(e){return m.reduce(a.current,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[]),p=Object(i.useCallback)((function(e){r.current=m.map(e,(function(e){return m.reduce(a.current,(function(t,n){return t.push(e[n.name]||""),t}),[])})),l()}),[l]),b=Object(i.useCallback)((function(e){a.current=m.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})),l()}),[l]);return Object(i.useEffect)((function(){l()}),[l]),i.createElement("div",{className:"relation-expression"},i.createElement(G,{columnPrefix:"column-",editColumnLabel:t.editRelation,columns:s(),rows:u(),onColumnsUpdate:b,onRowsUpdate:p,handlerConfiguration:n}))},J=(n(287),n(288),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,a=e.onExpressionResetting,r=Object(i.useRef)(null),o=Object(i.useRef)(t),l=void 0===t.logicType;Object(i.useEffect)((function(){o.current=m.omit(t,"isHeadless")}),[l]);var s=Object(i.useCallback)((function(){return r.current}),[]),u=Object(i.useCallback)((function(e){o.current.logicType=e,n(m.omit(o.current,"isHeadless"))}),[n]),d=Object(i.useCallback)((function(){o.current.logicType=c.LogicType.Undefined,null===a||void 0===a||a(),n(m.omit(o.current,"isHeadless"))}),[a,n]),p=Object(i.useCallback)((function(e){}),[]);return i.createElement(R,{width:300,height:"100%",minWidth:10,onHorizontalResizeStop:p},i.createElement("div",{className:"entry-expression",ref:r},i.createElement(se,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:o.current,onLogicTypeUpdating:u,onLogicTypeResetting:d,getPlacementRef:s})))}),q=function(e){var t=e.data,n=e.row.index,a=e.onRowUpdate,r=t[n],c=Object(i.useRef)(Object(o.a)({uid:r.entryExpression.uid},r.entryExpression)),l=void 0===r.entryExpression.logicType;Object(i.useEffect)((function(){c.current=r.entryExpression,a(n,Object(o.a)(Object(o.a)({},r),{},{entryExpression:c.current}))}),[l]);var s=Object(i.useCallback)((function(e){c.current=e,a(n,Object(o.a)(Object(o.a)({},r),{},{entryExpression:e}))}),[]);return i.createElement("div",{className:"context-entry-expression-cell"},i.createElement(J,{expression:c.current,onUpdatingRecursiveExpression:s,onExpressionResetting:r.onExpressionResetting}))},Q=(n(289),function(e){var t=e.name,n=e.dataType,r=e.onContextEntryUpdate,o=e.editInfoPopoverLabel,c=Object(i.useState)(t),l=Object(a.a)(c,2),s=l[0],u=l[1],d=Object(i.useState)(n),p=Object(a.a)(d,2),b=p[0],f=p[1];Object(i.useEffect)((function(){u(t)}),[t]),Object(i.useEffect)((function(){f(n)}),[n]);var m=Object(i.useCallback)((function(e){var t=e.name,n=e.dataType;u(t),f(n),r(t,n)}),[r]),E=Object(i.useCallback)((function(e){}),[]);return i.createElement("div",{className:"entry-info"},i.createElement(R,{width:300,height:"100%",minWidth:10,onHorizontalResizeStop:E},i.createElement(O,{title:o,selectedExpressionName:s,selectedDataType:b,onExpressionUpdate:m},i.createElement("div",{className:"entry-definition"},i.createElement("p",{className:"entry-name pf-u-text-truncate",title:s},s),i.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:b},"(",b,")")))))}),Z=function(e){var t=e.data,n=e.row.index,r=e.onRowUpdate,c=t[n],l=Object(i.useState)(c.entryInfo),s=Object(a.a)(l,2),u=s[0],d=s[1];Object(i.useEffect)((function(){d(c.entryInfo)}),[c.entryInfo]);var p=Object(i.useCallback)((function(e,t){r(n,Object(o.a)(Object(o.a)({},c),{},{entryInfo:{name:e,dataType:t}}))}),[c,n,r]);return i.createElement("div",{className:"context-entry-info-cell"},i.createElement(Q,{name:u.name,dataType:u.dataType,onContextEntryUpdate:p,editInfoPopoverLabel:c.editInfoPopoverLabel}))},$="ContextEntry-1",ee=c.DataType.Undefined,te=function(e){var t=e.uid,n=e.name,r=void 0===n?$:n,l=e.dataType,s=void 0===l?ee:l,u=e.onUpdatingNameAndDataType,p=e.contextEntries,b=e.result,f=void 0===b?{}:b,E=e.entryInfoWidth,y=void 0===E?c.DEFAULT_ENTRY_INFO_MIN_WIDTH:E,O=e.entryExpressionWidth,v=void 0===O?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:O,x=e.isHeadless,h=void 0!==x&&x,C=e.onUpdatingRecursiveExpression,j=Object(d.useBoxedExpressionEditorI18n)().i18n,T=Object(i.useState)(f),g=Object(a.a)(T,2),w=g[0],I=g[1],L=Object(i.useState)(y),N=Object(a.a)(L,2),k=N[0],D=N[1],H=Object(i.useState)(v),U=Object(a.a)(H,2),S=U[0],A=U[1],P=Object(i.useState)([{label:r,accessor:r,dataType:s,disableHandlerOnHeader:!0,columns:[{label:"Name",accessor:"entryInfo",disableHandlerOnHeader:!0,width:"initial"},{label:"Value",accessor:"entryExpression",disableHandlerOnHeader:!0,width:"initial"}]}]),_=Object(a.a)(P,2),W=_[0],F=_[1],B=Object(i.useState)(p||[{entryInfo:{name:$,dataType:ee},entryExpression:{},editInfoPopoverLabel:j.editContextEntry}]),z=Object(a.a)(B,2),M=z[0],V=z[1],Y=Object(i.useCallback)((function(e){var t,n,i=Object(a.a)(e,1)[0];null===u||void 0===u||u(i.label,i.dataType),A(null===(t=m.find(i.columns,{accessor:"entryExpression"}))||void 0===t?void 0:t.width),D(null===(n=m.find(i.columns,{accessor:"entryInfo"}))||void 0===n?void 0:n.width),F((function(e){var t=Object(a.a)(e,1)[0];return[Object(o.a)(Object(o.a)({},t),{},{label:i.label,accessor:i.accessor,dataType:i.dataType})]}))}),[u]),K=Object(i.useCallback)((function(){return{entryInfo:{name:Object(c.generateNextAvailableEntryName)(M,"ContextEntry"),dataType:c.DataType.Undefined},entryExpression:{},editInfoPopoverLabel:j.editContextEntry}}),[j.editContextEntry,M]),X=Object(i.useCallback)((function(){return h?c.TableHeaderVisibility.LastLevel:c.TableHeaderVisibility.Full}),[h]),Q=Object(i.useCallback)((function(e){}),[]);return Object(i.useEffect)((function(){var e,n,i=Object(a.a)(W,1)[0],r=Object(o.a)(Object(o.a)({uid:t,logicType:c.LogicType.Context,name:i.accessor,dataType:i.dataType,contextEntries:M,result:m.omit(w,"isHeadless")},k>c.DEFAULT_ENTRY_INFO_MIN_WIDTH?{entryInfoWidth:k}:{}),S>c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH?{entryExpressionWidth:S}:{});h?null===C||void 0===C||C(m.omit(r,["name","dataType"])):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastContextExpressionDefinition)||void 0===n||n.call(e,r)}),[W,h,C,M,w,k,S,t]),i.createElement("div",{className:"context-expression ".concat(t)},i.createElement(G,{tableId:t,headerLevels:1,headerVisibility:X(),defaultCell:{entryInfo:Z,entryExpression:q},columns:W,rows:M,onColumnsUpdate:Y,onRowAdding:K,onRowsUpdate:V,handlerConfiguration:Object(c.getHandlerConfiguration)(j,j.contextEntry),getRowKey:Object(i.useCallback)(c.getEntryKey,[]),resetRowCustomFunction:Object(i.useCallback)(c.resetEntry,[])},i.createElement(R,{width:300,height:"100%",minWidth:10,onHorizontalResizeStop:Q},i.createElement("div",{className:"context-result"},"<result>")),i.createElement(J,{expression:w,onUpdatingRecursiveExpression:I})))},ne=n(91);var ae=n(166),ie=n.n(ae),re=function(){return i.createElement("div",null,"Decision Table")},oe=(n(290),function(e){var t=e.isHeadless,n=e.items,r=e.onUpdatingRecursiveExpression,l=e.uid,s=e.width,u=void 0===s?430:s,p=Object(d.useBoxedExpressionEditorI18n)().i18n,b=[{group:p.rows,items:[{name:p.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:p.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:p.rowOperations.delete,type:c.TableOperation.RowDelete},{name:p.rowOperations.clear,type:c.TableOperation.RowClear}]}],f=function(){return{logicType:c.LogicType.LiteralExpression}},E=Object(i.useState)(m.isEmpty(n)?[{entryExpression:f()}]:m.map(n,(function(e){return{entryExpression:e}}))),y=Object(a.a)(E,2),O=y[0],v=y[1],x=Object(i.useRef)(u),h=Object(i.useCallback)((function(e){return e.original.entryExpression.uid}),[]),C=Object(i.useCallback)((function(){return{entryExpression:f()}}),[]),j=Object(i.useCallback)((function(){var e,n,a=Object(o.a)(Object(o.a)({uid:l},430!==x.current?{width:x.current}:{}),{},{logicType:c.LogicType.List,items:m.map(O,(function(e){return e.entryExpression}))});t?null===r||void 0===r||r(a):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastListExpressionDefinition)||void 0===n||n.call(e,a)}),[t,O,r,l]),T=Object(i.useCallback)((function(e){v(e)}),[]),g=Object(i.useCallback)((function(e){return{entryExpression:{uid:e.entryExpression.uid}}}),[]),w=Object(i.useCallback)((function(e){x.current=e,j()}),[j]);return Object(i.useEffect)((function(){j()}),[O,j]),i.createElement("div",{className:"list-expression"},i.createElement(R,{width:x.current,height:"100%",minWidth:430,onHorizontalResizeStop:w},i.createElement(G,{tableId:l,headerVisibility:c.TableHeaderVisibility.None,defaultCell:{list:q},columns:[{accessor:"list",width:"100%"}],rows:O,onRowsUpdate:T,onRowAdding:C,handlerConfiguration:b,getRowKey:h,resetRowCustomFunction:g})))}),ce=(n(291),c.DataType.Undefined),le=function(e){var t=e.bindingEntries,n=e.dataType,r=void 0===n?ce:n,l=e.entryInfoWidth,s=void 0===l?c.DEFAULT_ENTRY_INFO_MIN_WIDTH:l,u=e.entryExpressionWidth,p=void 0===u?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:u,b=e.invokedFunction,f=void 0===b?"":b,E=e.isHeadless,y=e.logicType,O=e.name,v=void 0===O?"p-1":O,x=e.onUpdatingNameAndDataType,h=e.onUpdatingRecursiveExpression,C=e.uid,j=Object(d.useBoxedExpressionEditorI18n)().i18n,T=Object(i.useState)(t||[{entryInfo:{name:"p-1",dataType:ce},entryExpression:{},editInfoPopoverLabel:j.editParameter}]),g=Object(a.a)(T,2),w=g[0],R=g[1],I=Object(i.useRef)(f),L=Object(i.useRef)(s),N=Object(i.useRef)(p),k=Object(i.useCallback)((function(){var e,t,n=Object(a.a)(S.current,1)[0],i=Object(o.a)(Object(o.a)({uid:C,logicType:y,name:n.accessor,dataType:n.dataType,bindingEntries:w,invokedFunction:I.current},L.current>c.DEFAULT_ENTRY_INFO_MIN_WIDTH?{entryInfoWidth:L.current}:{}),N.current>c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH?{entryExpressionWidth:N.current}:{});E?null===h||void 0===h||h(m.omit(i,["name","dataType"])):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastInvocationExpressionDefinition)||void 0===t||t.call(e,i)}),[I,E,y,h,w,C]),D=Object(i.useCallback)((function(e){I.current=e.target.value}),[]),H=Object(i.useCallback)((function(){k()}),[k]),U=i.createElement("div",{className:"function-definition-container"},i.createElement("input",{className:"function-definition pf-u-text-truncate",type:"text",placeholder:j.enterFunction,onChange:D,onBlur:H,defaultValue:I.current})),S=Object(i.useRef)([{label:v,accessor:v,dataType:r,disableHandlerOnHeader:!0,columns:[{headerCellElement:U,accessor:"functionDefinition",disableHandlerOnHeader:!0,columns:[{accessor:"entryInfo",disableHandlerOnHeader:!0,canResizeOnCell:!0,width:L.current,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH},{accessor:"entryExpression",disableHandlerOnHeader:!0,canResizeOnCell:!0,width:N.current,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}]),A=Object(i.useCallback)((function(e){var t,n,i=Object(a.a)(e,1)[0];null===x||void 0===x||x(i.label,i.dataType),L.current=null===(t=m.find(i.columns,{accessor:"entryInfo"}))||void 0===t?void 0:t.width,N.current=null===(n=m.find(i.columns,{accessor:"entryExpression"}))||void 0===n?void 0:n.width;var r=Object(a.a)(S.current,1)[0];r.label=i.label,r.accessor=i.accessor,r.dataType=i.dataType,k()}),[x,k]),P=Object(i.useCallback)((function(){return{entryInfo:{name:Object(c.generateNextAvailableEntryName)(w,"p"),dataType:ce},entryExpression:{},editInfoPopoverLabel:j.editParameter}}),[j.editParameter,w]),_=Object(i.useCallback)((function(){return E?c.TableHeaderVisibility.SecondToLastLevel:c.TableHeaderVisibility.Full}),[E]);return Object(i.useEffect)((function(){k()}),[w,k]),i.createElement("div",{className:"invocation-expression ".concat(C)},i.createElement(G,{tableId:C,headerLevels:2,headerVisibility:_(),skipLastHeaderGroup:!0,defaultCell:{entryInfo:Z,entryExpression:q},columns:S.current,rows:w,onColumnsUpdate:A,onRowAdding:P,onRowsUpdate:R,handlerConfiguration:Object(c.getHandlerConfiguration)(j,j.parameters),getRowKey:Object(i.useCallback)(c.getEntryKey,[]),resetRowCustomFunction:Object(i.useCallback)(c.resetEntry,[])}))},se=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,r=e.onLogicTypeResetting,o=e.onUpdatingNameAndDataType,l=e.getPlacementRef,s=e.isHeadless,p=void 0!==s&&s,b=e.onUpdatingRecursiveExpression,f=Object(d.useBoxedExpressionEditorI18n)().i18n,y=Object(i.useContext)(E),O=m.extend(t,{uid:t.uid||ie()(),isHeadless:p,onUpdatingNameAndDataType:o,onUpdatingRecursiveExpression:b}),v=function(e){return!m.isEmpty(e)&&e!==c.LogicType.Undefined},x=Object(i.useState)(v(O.logicType)),h=Object(a.a)(x,2),C=h[0],j=h[1];Object(i.useEffect)((function(){j(v(t.logicType))}),[t.logicType]);var T=function(){var e=Object(i.useRef)(null),t=Object(i.useState)("0px"),n=Object(a.a)(t,2),r=n[0],o=n[1],c=Object(i.useState)("0px"),l=Object(a.a)(c,2),s=l[0],u=l[1],d=Object(i.useState)(!1),p=Object(a.a)(d,2),b=p[0],f=p[1],m=Object(i.useCallback)((function(){b&&f(!1)}),[b]),E=Object(i.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),o("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),f(!0))}),[o,u]);return Object(i.useEffect)((function(){return document.addEventListener("click",m),document.addEventListener("contextmenu",m),document.addEventListener("contextmenu",E),function(){document.removeEventListener("click",m),document.removeEventListener("contextmenu",m),document.removeEventListener("contextmenu",E)}})),{contextMenuRef:e,contextMenuXPos:r,contextMenuYPos:s,contextMenuVisibility:b,setContextMenuVisibility:f}}(),g=T.contextMenuRef,w=T.contextMenuXPos,R=T.contextMenuYPos,I=T.contextMenuVisibility,N=T.setContextMenuVisibility,k=Object(i.useMemo)((function(){switch(O.logicType){case c.LogicType.LiteralExpression:return i.createElement(L,O);case c.LogicType.Relation:return i.createElement(X,O);case c.LogicType.Context:return i.createElement(te,O);case c.LogicType.DecisionTable:return i.createElement(re,O);case c.LogicType.Invocation:return i.createElement(le,O);case c.LogicType.List:return i.createElement(oe,O);case c.LogicType.Function:default:return O.logicType}}),[O.logicType]),D=Object(i.useCallback)((function(){return Object.values(c.LogicType).filter((function(e){return e!==c.LogicType.Undefined}))}),[]),H=Object(i.useCallback)((function(){return m.map(D(),(function(e){return i.createElement(F.a,{key:e,itemId:e},e)}))}),[D]),U=Object(i.useCallback)((function(){return l()}),[l]),S=Object(i.useCallback)((function(){var e,t;return null!==(e=null===(t=y.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:U}),[U,y.boxedExpressionEditorRef]),A=Object(i.useCallback)((function(e,t){j(!0),n(t)}),[n]),_=Object(i.useCallback)((function(){return i.createElement(u,{title:f.selectLogicType,arrowPlacement:U,appendTo:S(),className:"logic-type-popover",hasAutoWidth:!0,body:i.createElement(P.a,{onSelect:A},i.createElement(W.a,null,H()))})}),[f.selectLogicType,U,S,A,H]),B=Object(i.useCallback)((function(){j(!1),N(!1),r()}),[r,N]),z=Object(i.useCallback)((function(){return i.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:R,left:w}},i.createElement(ne.a,{isDisabled:!C,isSmall:!0,variant:ne.b.primary,onClick:B},f.clear))}),[C,w,R,B,f.clear]);return i.createElement("div",{className:"logic-type-selector ".concat(K," ").concat(C?"logic-type-selected":"logic-type-not-present"),ref:g},C?k:f.selectExpression,C?null:_(),I?z():null)},ue=function(e){var t=Object(i.useRef)(null),n=Object(i.useState)(e.selectedExpression),r=Object(a.a)(n,2),l=r[0],s=r[1],u=Object(i.useCallback)((function(e,t){s((function(n){return Object(o.a)(Object(o.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(i.useCallback)((function(e){s((function(t){return Object(o.a)(Object(o.a)({},t),{},{logicType:e})}))}),[]),p=Object(i.useCallback)((function(){s((function(e){var t,n,a={uid:e.uid,name:e.name,dataType:e.dataType,logicType:c.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(i.useCallback)((function(){return t.current}),[]);return i.createElement("div",{className:"expression-container"},i.createElement("div",{className:"expression-name-and-logic-type"},i.createElement("span",{className:"expression-title"},l.name),i.createElement("span",{className:"expression-type"},"(",l.logicType||c.LogicType.Undefined,")")),i.createElement("div",{className:"expression-container-box",ref:t,"data-ouia-component-id":"expression-container"},i.createElement(se,{selectedExpression:l,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:u,getPlacementRef:b})))},de=function(e){var t=Object(i.useState)((function(){return m.identity})),n=Object(a.a)(t,2),o=n[0],c=n[1],l=Object(i.useRef)(null);return i.createElement(r.I18nDictionariesProvider,{defaults:d.boxedExpressionEditorI18nDefaults,dictionaries:d.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:d.BoxedExpressionEditorI18nContext},i.createElement(E.Provider,{value:{boxedExpressionEditorRef:l,currentlyOpenedHandlerCallback:o,setCurrentlyOpenedHandlerCallback:c}},i.createElement(I,null,i.createElement("div",{className:"boxed-expression-editor",ref:l},i.createElement(ue,e.expressionDefinition)))))}}},[[170,1,2]]]);
//# sourceMappingURL=main.ca82f9b1.chunk.js.map